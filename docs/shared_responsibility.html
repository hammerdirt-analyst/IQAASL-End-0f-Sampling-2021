
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>20. Shared responsibility</title>
    
  <link href="_static/css/theme.css" rel="stylesheet" />
  <link href="_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.e8e5499552300ddf5d7adccae7cc3b70.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="21. More and less since 2018" href="slr_2017.html" />
    <link rel="prev" title="19. Recycle and remake" href="reuse_remake.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      <img src="_static/iqaaslogo.png" class="logo" alt="logo">
      
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="titlepage.html">
   Identification, quantification and Analysis of Observable Anthropogenic Litter Along Swiss Freshwater Systems
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Summary
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Foreword
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="esummary.html">
   Executive summary
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Survey results
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="lakes_rivers.html">
   1. Lakes and rivers
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="alpes_valaisannes.html">
   2. The Alps and the Jura
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Survey areas
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="aare_sa.html">
   3. Aare survey area
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="linth_sa.html">
   4. Linth survey area
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="rhone_sa.html">
   5. Rhône survey area
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ticino_sa.html">
   6. Ticino survey area
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Lakes
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="bielersee.html">
   7. Bielersee
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="lac_leman.html">
   8. Lac Léman
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="neuenburgersee.html">
   9. Neuenburgersee
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="maggiore_lugano.html">
   10. Maggiore/Lugano
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="thunersee_brienzersee.html">
   11. Thunersee/Brienzersee
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="walensee.html">
   12. Walensee
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="zurichsee.html">
   13. Zurichsee
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Understand
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="baselines.html">
   14. Beach litter baselines
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="key_indicators.html">
   15. Key statistical indicators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="code_groups.html">
   16. Code groups
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="land_use_correlation.html">
   17. The land use profile
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="references.html">
   18. Reading
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Application
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="reuse_remake.html">
   19. Recycle and remake
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   20. Shared responsibility
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="slr_2017.html">
   21. More and less since 2018
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/shared_responsibility.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/hammerdirt-analyst/IQAASL-End-0f-Sampling-2021"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/hammerdirt-analyst/IQAASL-End-0f-Sampling-2021/issues/new?title=Issue%20on%20page%20%2Fshared_responsibility.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/hammerdirt-analyst/IQAASL-End-0f-Sampling-2021/main?urlpath=tree/docs/shared_responsibility.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-challenge">
   20.1. The Challenge
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-origins-of-the-most-common-objects">
   20.2. The origins of the most common objects
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-data">
   20.3. The data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#assessment-of-composition-the-big-picture">
     20.3.1. Assessment of composition: the big picture
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#distribution-of-survey-totals-for-the-different-object-groups">
     20.3.2. Distribution of survey totals for the different object groups
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#difference-of-means">
       20.3.2.1. Difference of means
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conclusion">
   20.4. Conclusion
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#discussion">
     20.4.1. Discussion
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#finding-partners">
       20.4.1.1. Finding partners
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#sharing-the-responsibility">
       20.4.1.2. Sharing the responsibility
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#annex">
   20.5. Annex
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#results-of-speramans-ranked-correlation-test">
     20.5.1. Results of Speramans ranked correlation test
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#seasonal-variations">
     20.5.2. Seasonal variations
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-survey-results-of-fp-and-ft-with-respect-to-land-use">
   20.6. The survey results of FP and FT with respect to land use
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#fp-and-ft-difference-of-means">
     20.6.1. FP and FT difference of means.
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># sys, file and nav packages:</span>
<span class="kn">import</span> <span class="nn">datetime</span> <span class="k">as</span> <span class="nn">dt</span>

<span class="c1"># math packages:</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>
<span class="kn">from</span> <span class="nn">statsmodels.distributions.empirical_distribution</span> <span class="kn">import</span> <span class="n">ECDF</span>

<span class="c1"># charting:</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.dates</span> <span class="k">as</span> <span class="nn">mdates</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">ticker</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">colors</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.gridspec</span> <span class="k">as</span> <span class="nn">gridspec</span>

<span class="c1"># home brew utitilties</span>
<span class="kn">import</span> <span class="nn">resources.chart_kwargs</span> <span class="k">as</span> <span class="nn">ck</span>

<span class="kn">import</span> <span class="nn">resources.sr_ut</span> <span class="k">as</span> <span class="nn">sut</span>

<span class="c1"># images and display</span>
<span class="kn">import</span> <span class="nn">base64</span><span class="o">,</span> <span class="nn">io</span><span class="o">,</span> <span class="nn">IPython</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span> <span class="k">as</span> <span class="n">PILImage</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Markdown</span> <span class="k">as</span> <span class="n">md</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">Math</span><span class="p">,</span> <span class="n">Latex</span>
<span class="kn">import</span> <span class="nn">matplotlib.image</span> <span class="k">as</span> <span class="nn">mpimg</span>


<span class="c1"># set some parameters:</span>
<span class="n">today</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">date</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">start_date</span> <span class="o">=</span> <span class="s1">&#39;2020-03-01&#39;</span>
<span class="n">end_date</span> <span class="o">=</span><span class="s1">&#39;2021-05-31&#39;</span>
<span class="n">a_fail_rate</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">unit_label</span> <span class="o">=</span> <span class="s1">&#39;p/100m&#39;</span>
<span class="n">reporting_unit</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">sns</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="s1">&#39;whitegrid&#39;</span><span class="p">)</span>
<span class="n">a_color</span> <span class="o">=</span> <span class="s1">&#39;dodgerblue&#39;</span>

<span class="c1"># set the maps</span>
<span class="n">bassin_map</span> <span class="o">=</span> <span class="n">PILImage</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;resources/maps/survey_locations_all.jpeg&quot;</span><span class="p">)</span>

<span class="c1"># common aggregations</span>
<span class="n">agg_pcs_quantity</span> <span class="o">=</span> <span class="p">{</span><span class="n">unit_label</span><span class="p">:</span><span class="s2">&quot;sum&quot;</span><span class="p">,</span> <span class="s2">&quot;quantity&quot;</span><span class="p">:</span><span class="s2">&quot;sum&quot;</span><span class="p">}</span>
<span class="n">agg_pcs_median</span> <span class="o">=</span> <span class="p">{</span><span class="n">unit_label</span><span class="p">:</span><span class="s2">&quot;median&quot;</span><span class="p">,</span> <span class="s2">&quot;quantity&quot;</span><span class="p">:</span><span class="s2">&quot;sum&quot;</span><span class="p">}</span>

<span class="c1"># aggregation of dimensional data</span>
<span class="n">agg_dims</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;total_w&quot;</span><span class="p">:</span><span class="s2">&quot;sum&quot;</span><span class="p">,</span> <span class="s2">&quot;mac_plast_w&quot;</span><span class="p">:</span><span class="s2">&quot;sum&quot;</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">:</span><span class="s2">&quot;sum&quot;</span><span class="p">,</span> <span class="s2">&quot;length&quot;</span><span class="p">:</span><span class="s2">&quot;sum&quot;</span><span class="p">}</span>

<span class="c1"># define the components</span>
<span class="n">comps</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;linth&#39;</span><span class="p">,</span> <span class="s1">&#39;rhone&#39;</span><span class="p">,</span> <span class="s1">&#39;aare&#39;</span><span class="p">,</span> <span class="s1">&#39;ticino&#39;</span><span class="p">]</span>
<span class="n">comp_labels</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;linth&quot;</span><span class="p">:</span><span class="s2">&quot;Linth/Limmat&quot;</span><span class="p">,</span> <span class="s2">&quot;rhone&quot;</span><span class="p">:</span><span class="s2">&quot;Rhône&quot;</span><span class="p">,</span> <span class="s1">&#39;aare&#39;</span><span class="p">:</span><span class="s2">&quot;Aare&quot;</span><span class="p">,</span> <span class="s2">&quot;ticino&quot;</span><span class="p">:</span><span class="s2">&quot;Ticino/Cerisio&quot;</span><span class="p">,</span> <span class="s2">&quot;reuss&quot;</span><span class="p">:</span><span class="s2">&quot;Reuss&quot;</span><span class="p">}</span>


<span class="c1"># explanatory variables:</span>
<span class="n">luse_exp</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;% to buildings&#39;</span><span class="p">,</span> <span class="s1">&#39;% to recreation&#39;</span><span class="p">,</span> <span class="s1">&#39;% to agg&#39;</span><span class="p">,</span> <span class="s1">&#39;% to woods&#39;</span><span class="p">,</span> <span class="s1">&#39;streets km&#39;</span><span class="p">,</span> <span class="s1">&#39;intersects&#39;</span><span class="p">]</span>

<span class="c1"># columns needed</span>
<span class="n">use_these_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;loc_date&#39;</span> <span class="p">,</span>
                  <span class="s1">&#39;% to buildings&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;% to trans&#39;</span><span class="p">,</span> 
                  <span class="s1">&#39;% to recreation&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;% to agg&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;% to woods&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;population&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;river_bassin&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;water_name_slug&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;streets km&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;intersects&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;length&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;groupname&#39;</span><span class="p">,</span>
                  <span class="s1">&#39;code&#39;</span>
                 <span class="p">]</span>

<span class="c1"># these are default</span>
<span class="n">top_name</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;All survey areas&quot;</span><span class="p">]</span>

<span class="c1"># add the folder to the directory tree:</span>


<span class="c1"># get your data:</span>
<span class="n">survey_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;resources/checked_sdata_eos_2020_21.csv&#39;</span><span class="p">)</span>
<span class="c1"># river_bassins = ut.json_file_get(&quot;resources/river_basins.json&quot;)</span>
<span class="n">dfBeaches</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;resources/beaches_with_land_use_rates.csv&quot;</span><span class="p">)</span>
<span class="n">dfCodes</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;resources/codes_with_group_names_2015.csv&quot;</span><span class="p">)</span>
<span class="n">dfDims</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;resources/corrected_dims.csv&quot;</span><span class="p">)</span>

<span class="c1"># set the index of the beach data to location slug</span>
<span class="n">dfBeaches</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;slug&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">dfCodes</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># make a map to the code descriptions</span>
<span class="n">code_description_map</span> <span class="o">=</span> <span class="n">dfCodes</span><span class="o">.</span><span class="n">description</span>

<span class="c1"># make a map to the code descriptions</span>
<span class="n">code_material_map</span> <span class="o">=</span> <span class="n">dfCodes</span><span class="o">.</span><span class="n">material</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="shared-responsibility">
<span id="transport"></span><h1><span class="section-number">20. </span>Shared responsibility<a class="headerlink" href="#shared-responsibility" title="Permalink to this headline">¶</a></h1>
<p>Research on litter transport and accumulation in the aquatic environment indicates that rivers are a primary sources of land based macro-plastics to the marine environment <span id="id1">[<a class="reference internal" href="references.html#id71">GFCH+21</a>]</span>. However not all objects that are transported by rivers make it to the ocean, suggesting that rivers and inland lakes are also sinks for a portion of the macro-plastics that are emitted <span id="id2">[<a class="reference internal" href="references.html#id73">KBK+18</a>]</span>.</p>
<p>Provisions in Swiss law, article 2 of the Federal Act on the Protection of the Environment (LPE) the <em>principal of causality</em> accounts for unlawful disposal of material and is commonly known as the principle of polluter payer. Ultimately, the responsibility of elimination and management of litter pollution in and along water systems is directly on the municipal and cantonal administrations as legally, they are owners of the land within their boundaries. The law does provide municipalities and cantons the ability to consider companies or persons further up the chain of causality, as producers of waste and to charge disposal fees to them (e.g. fast-food companies and similar businesses, or organizers of events that generate large quantities of waste on the public space) when specific offenders cannot be identified, if objective criteria are used to determine the chain of causality. <span id="id3">[<a class="reference internal" href="references.html#id7">fdlCs20</a>]</span> <span id="id4">[<a class="reference internal" href="references.html#id2">cfs20</a>]</span> <span id="id5">[<a class="reference internal" href="references.html#id5">fdlenvironnement18</a>]</span> <span id="id6">[<a class="reference internal" href="references.html#id3">fc12</a>]</span></p>
<div class="section" id="the-challenge">
<h2><span class="section-number">20.1. </span>The Challenge<a class="headerlink" href="#the-challenge" title="Permalink to this headline">¶</a></h2>
<p>The challenge is to meet the requirements of objective criteria. The method to meet the requirements needs to be <strong>robust, transparent and easily repeatable</strong>.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sut</span><span class="o">.</span><span class="n">display_image_ipython</span><span class="p">(</span><span class="s2">&quot;resources/images/shared_responsibility/gclosmay2020.jpeg&quot;</span><span class="p">,</span> <span class="n">thumb</span><span class="o">=</span><span class="p">(</span><span class="mi">1200</span><span class="p">,</span> <span class="mi">700</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/shared_responsibility_2_0.png" src="_images/shared_responsibility_2_0.png" />
</div>
</div>
<p><em><strong>Above: obtaining objective criteria:</strong>. Grand Clos, St. Gingoplh May 2020. The challenge is to extract as much information from the litter objects based on the quantity found, the properties of the object and the environmental variables in proximity of the survey location. Obtaining objective criteria from beach litter data is further complicated because of the approximately 61’000km of rivers and 1500 lakes in Switzerland</em> <span id="id7">[<a class="reference internal" href="references.html#id40">con</a>]</span>.</p>
<p>The use of the object prior to it being discarded, and then later identified in a litter survey,  is the best indicator of its probable origin. When land use rates are considered there is an association between the amount of land used for buildings and recreation and the amount of cigarette filters and snack wrappers that are found at the beach,<a class="reference internal" href="land_use_correlation.html#luseprofile"><span class="std std-ref"><em>The land use profile</em></span></a>. This result, however, is only true for objects that are associated with the consumption of food or tobacco, approximately 26% of all objects found.</p>
<p>Other objects have no definitive geographic source or no clear association with an activity in proximity to where they are found. The most common of these objects are <span class="math notranslate nohighlight">\(\approxeq\)</span> 40% of all litter items identified in 2020, <a class="reference internal" href="lakes_rivers.html#allsurveys"><span class="std std-ref"><em>Lakes and rivers</em> </span></a>. Clearly, reducing the amount of litter on the beach includes reducing the amount litter that originates from outside the geographic limits of the beach itself. Thus, there an incentive to identify litter objects that are of local origin and those that may have arrived at the survey location by some-other means.</p>
<p>The hydrologic conditions of rivers have an effect on the distance and direction that litter, once introduced into a river will travel. Large, low density objects will most likely be transported to the next reservoir or area of reduced flow. High density objects will only be transported if the flow velocity and turbulence of the water are sufficient to keep the objects off the bottom. Once high density items enter a low velocity zone they tend to settle or sink <span id="id8">[<a class="reference internal" href="references.html#id69">SLBH19</a>]</span>.</p>
</div>
<div class="section" id="the-origins-of-the-most-common-objects">
<h2><span class="section-number">20.2. </span>The origins of the most common objects<a class="headerlink" href="#the-origins-of-the-most-common-objects" title="Permalink to this headline">¶</a></h2>
<p>The most common objects are those objects that were either among the top ten most abundant objects or objects that were found in at least 50% of the surveys. To better understand where these objects originate from, the distinction is made between two gorups of objects:</p>
<ol class="simple">
<li><p><strong>contributed (CG):</strong> objects that have multiple positive associations to land use features and one association is to buildings</p>
<ul class="simple">
<li><p>Cigarette ends</p></li>
<li><p>Metal bottle tops</p></li>
<li><p>Snack wrappers</p></li>
<li><p>Glass bottles and pieces</p></li>
</ul>
</li>
<li><p><strong>distributed (DG):</strong> objects that have few or no positive associations to land use features</p>
<ul class="simple">
<li><p>Fragmented expanded polystyrene</p></li>
<li><p>Plastic production pellets</p></li>
<li><p>Fragmented plastics</p></li>
<li><p>Cotton swabs*</p></li>
<li><p>Industrial sheeting</p></li>
<li><p>Construction plastics</p></li>
</ul>
</li>
</ol>
<p>Furthermore, the survey locations are considered in relation to the land-use rates of the surounding 1500m, <a class="reference internal" href="land_use_correlation.html#luseprofile"><span class="std std-ref"><em>The land use profile</em></span></a>. The median value of the space attributed to buildings was used to differentiate the survey locations into two distinct groups:</p>
<ol class="simple">
<li><p><strong>urban:</strong> locations that have a percent of land attributed to buildings GREATER than the median of all survey locations</p></li>
<li><p><strong>rural:</strong> locations that have a percent of land attributed to buildings LESS than the median of all survey locations AND percent of land attributed to woods or agriculture greater than the median</p></li>
</ol>
<p>The rural class had 148 surveys for 50 locations versus 152 surveys from 34 locations in the urban class.</p>
<p><strong>*Note:</strong> cotton swabs are included with DG because they are usually introduced directly into a body of water after passing through a water treatment facility.</p>
<p><em><strong>Below: Identifying DG group items.</strong> DG is a diverse group of objects representing the construction, manufacturing and retail industries. In some cases like fragmented plastics and foams the original objects are no longer recognizable.</em></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># read images</span>
<span class="n">img_a</span> <span class="o">=</span> <span class="n">mpimg</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;resources/images/shared_responsibility/fragplass_dense_450_600.jpg&#39;</span><span class="p">)</span>
<span class="n">img_b</span> <span class="o">=</span> <span class="n">mpimg</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;resources/images/shared_responsibility/fragfoam_450_600.jpg&#39;</span><span class="p">)</span>
<span class="n">img_c</span> <span class="o">=</span> <span class="n">mpimg</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;resources/images/shared_responsibility/infrastructure_450_600.jpg&#39;</span><span class="p">)</span>
<span class="n">img_d</span> <span class="o">=</span> <span class="n">mpimg</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;resources/images/shared_responsibility/gpis_450_600.jpg&#39;</span><span class="p">)</span>

<span class="c1"># display images</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>

<span class="n">axone</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="n">sut</span><span class="o">.</span><span class="n">hide_spines_ticks_grids</span><span class="p">(</span><span class="n">axone</span><span class="p">)</span>
<span class="n">axone</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">img_a</span><span class="p">);</span>
<span class="n">axone</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Fragmented plastics&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">title_k14</span><span class="p">)</span>

<span class="n">axtwo</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="n">sut</span><span class="o">.</span><span class="n">hide_spines_ticks_grids</span><span class="p">(</span><span class="n">axtwo</span><span class="p">)</span>
<span class="n">axtwo</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">img_b</span><span class="p">);</span>
<span class="n">axtwo</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Fragmented foams&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">title_k14</span><span class="p">)</span>

<span class="n">axthree</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="n">sut</span><span class="o">.</span><span class="n">hide_spines_ticks_grids</span><span class="p">(</span><span class="n">axthree</span><span class="p">)</span>
<span class="n">axthree</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">img_c</span><span class="p">);</span>
<span class="n">axthree</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Construction plastics&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">title_k14</span><span class="p">)</span>

<span class="n">axfour</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="n">sut</span><span class="o">.</span><span class="n">hide_spines_ticks_grids</span><span class="p">(</span><span class="n">axfour</span><span class="p">)</span>
<span class="n">axfour</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">img_d</span><span class="p">)</span>
<span class="n">axfour</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Plastic production pellets&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">title_k14</span><span class="p">)</span>


<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/shared_responsibility_6_0.png" src="_images/shared_responsibility_6_0.png" />
</div>
</div>
<p>The results from the different groups will be used to test the following null hypothesis, based on the results of Spearmans ranked correlation coefficient:</p>
<p><strong>If</strong> there is no statistically significant evidence that land use features contributes to the accumulation of an object then the distribution of that object should be <span class="math notranslate nohighlight">\(\approxeq\)</span> under all land use conditions.</p>
<blockquote>
<div><p>Null hypothesis: there is no statistically significant difference between survey results of DG or CG objects at rural and urban locations.</p>
</div></blockquote>
<blockquote>
<div><p>Alternate hypothesis: there is a statistically significant difference between survey results of DG or CG objects at rural and urban locations.</p>
</div></blockquote>
<p><strong>methods</strong></p>
<p>The hypothesis is tested using a combination of non-parametric tests to confirm significance:</p>
<ol class="simple">
<li><p>Two sample Kolmogorov-Smirnov <span id="id9">[<a class="reference internal" href="references.html#id14">sca</a>]</span></p></li>
<li><p>Mann-Whitney <em>U</em> (MWU) <span id="id10">[<a class="reference internal" href="references.html#id15">scb</a>]</span></p></li>
<li><p>Bootstrap resampling difference of means <span id="id11">[<a class="reference internal" href="references.html#id27">Efr87</a>]</span> <span id="id12">[<a class="reference internal" href="references.html#id28">dry20</a>]</span></p></li>
</ol>
</div>
<div class="section" id="the-data">
<h2><span class="section-number">20.3. </span>The data<a class="headerlink" href="#the-data" title="Permalink to this headline">¶</a></h2>
<p><em><strong>Below:</strong> Map of survey locations IQAASL.</em></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sut</span><span class="o">.</span><span class="n">display_image_ipython</span><span class="p">(</span><span class="s2">&quot;resources/maps/survey_locations_all.jpeg&quot;</span><span class="p">,</span> <span class="n">thumb</span><span class="o">=</span><span class="p">(</span><span class="mi">1200</span><span class="p">,</span> <span class="mi">700</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/shared_responsibility_9_0.png" src="_images/shared_responsibility_9_0.png" />
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># make date stamp</span>
<span class="n">survey_data</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">survey_data</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># the land use data was unvailable for these municipalities</span>
<span class="n">no_land_use</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Walenstadt&#39;</span><span class="p">,</span> <span class="s1">&#39;Weesen&#39;</span><span class="p">,</span> <span class="s1">&#39;Glarus Nord&#39;</span><span class="p">,</span> <span class="s1">&#39;Quarten&#39;</span><span class="p">]</span>

<span class="c1"># slice the data by start and end date, remove the locations with no land use data</span>
<span class="n">use_these_args</span> <span class="o">=</span> <span class="p">((</span><span class="n">survey_data</span><span class="o">.</span><span class="n">date</span> <span class="o">&gt;=</span> <span class="n">start_date</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">survey_data</span><span class="o">.</span><span class="n">date</span> <span class="o">&lt;=</span> <span class="n">end_date</span><span class="p">))</span>
<span class="n">survey_data</span> <span class="o">=</span> <span class="n">survey_data</span><span class="p">[</span><span class="n">use_these_args</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># slice date to working data</span>
<span class="n">a_data</span> <span class="o">=</span> <span class="n">survey_data</span><span class="p">[(</span><span class="o">~</span><span class="n">survey_data</span><span class="o">.</span><span class="n">city</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">no_land_use</span><span class="p">))]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># summarize the data</span>
<span class="n">nsamps</span> <span class="o">=</span> <span class="n">a_data</span><span class="o">.</span><span class="n">loc_date</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
<span class="n">nlocs</span> <span class="o">=</span> <span class="n">a_data</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>

<span class="c1"># column headers for the survey area data</span>
<span class="n">a_data</span><span class="p">[</span><span class="s1">&#39;survey area&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">a_data</span><span class="o">.</span><span class="n">river_bassin</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">comp_labels</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>

<span class="c1"># feature data</span>
<span class="n">fd</span> <span class="o">=</span> <span class="n">a_data</span><span class="p">[</span><span class="n">a_data</span><span class="o">.</span><span class="n">w_t</span> <span class="o">==</span> <span class="s2">&quot;l&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># survey totals            </span>
<span class="n">ad_dt</span> <span class="o">=</span> <span class="n">a_data</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;loc_date&#39;</span><span class="p">,</span><span class="s1">&#39;location&#39;</span><span class="p">,</span><span class="s1">&#39;river_bassin&#39;</span><span class="p">,</span> <span class="s1">&#39;water_name_slug&#39;</span><span class="p">,</span><span class="s1">&#39;city&#39;</span><span class="p">,</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;month&#39;</span><span class="p">,</span> <span class="s1">&#39;eom&#39;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="n">unit_label</span><span class="p">:</span><span class="s1">&#39;sum&#39;</span><span class="p">,</span> <span class="s1">&#39;quantity&#39;</span><span class="p">:</span><span class="s1">&#39;sum&#39;</span><span class="p">})</span>

<span class="c1"># map survey total quantity to loc_date</span>
<span class="n">fd_dq</span> <span class="o">=</span> <span class="n">ad_dt</span><span class="p">[[</span><span class="s1">&#39;loc_date&#39;</span><span class="p">,</span> <span class="s1">&#39;quantity&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;loc_date&#39;</span><span class="p">)</span>

<span class="n">t</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;locations&quot;</span><span class="p">:</span><span class="n">fd</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span> <span class="s2">&quot;nsamples&quot;</span><span class="p">:</span><span class="n">fd</span><span class="o">.</span><span class="n">loc_date</span><span class="o">.</span><span class="n">nunique</span><span class="p">()}</span>

<span class="c1"># gather the dimensional data for the time frame from dfDims</span>
<span class="n">fd_dims</span><span class="o">=</span> <span class="n">dfDims</span><span class="p">[(</span><span class="n">dfDims</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="s2">&quot;locations&quot;</span><span class="p">]))</span><span class="o">&amp;</span><span class="p">(</span><span class="n">dfDims</span><span class="o">.</span><span class="n">date</span> <span class="o">&gt;=</span> <span class="n">start_date</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">dfDims</span><span class="o">.</span><span class="n">date</span> <span class="o">&lt;=</span> <span class="n">end_date</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># map the survey area name to the dims data record</span>
<span class="n">m_ap_to_survey_area</span> <span class="o">=</span> <span class="n">fd</span><span class="p">[[</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;river_bassin&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s1">&#39;records&#39;</span><span class="p">)</span>
<span class="n">a_new_map</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">]:</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;river_bassin&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">m_ap_to_survey_area</span><span class="p">}</span>

<span class="c1"># cumulative statistics for each code</span>
<span class="n">code_totals</span> <span class="o">=</span> <span class="n">sut</span><span class="o">.</span><span class="n">the_aggregated_object_values</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">agg</span><span class="o">=</span><span class="n">agg_pcs_median</span><span class="p">,</span> <span class="n">description_map</span><span class="o">=</span><span class="n">code_description_map</span><span class="p">,</span> <span class="n">material_map</span><span class="o">=</span><span class="n">code_material_map</span><span class="p">)</span>    
<span class="n">most_abundant</span> <span class="o">=</span> <span class="n">code_totals</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;quantity&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="mi">10</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>

<span class="c1"># found greater than 50% of the time</span>
<span class="n">common</span> <span class="o">=</span> <span class="n">code_totals</span><span class="p">[</span><span class="n">code_totals</span><span class="p">[</span><span class="s1">&#39;fail rate&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">50</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>

<span class="c1"># the most common</span>
<span class="n">most_common</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">([</span><span class="o">*</span><span class="n">most_abundant</span><span class="p">,</span> <span class="o">*</span><span class="n">common</span><span class="p">]))</span>

<span class="c1"># Two land classifications</span>
<span class="n">rural</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;urban&quot;</span><span class="p">,</span> <span class="s2">&quot;rural&quot;</span><span class="p">]</span>

<span class="c1"># Two code groups</span>
<span class="n">cgroups</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;DG&quot;</span><span class="p">,</span> <span class="s2">&quot;CG&quot;</span><span class="p">]</span>

<span class="n">DG</span> <span class="o">=</span> <span class="s2">&quot;DG&quot;</span>
<span class="n">CG</span> <span class="o">=</span> <span class="s2">&quot;CG&quot;</span>

<span class="c1"># Two object types</span>
<span class="n">obj_groups</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;FP&quot;</span><span class="p">,</span> <span class="s2">&quot;FT&quot;</span><span class="p">]</span>

<span class="c1"># objects that are likely left on site</span>
<span class="n">cont</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;G27&quot;</span><span class="p">,</span> <span class="s2">&quot;G30&quot;</span><span class="p">,</span> <span class="s2">&quot;G178&quot;</span><span class="p">,</span> <span class="s2">&quot;G200&quot;</span><span class="p">]</span>

<span class="c1"># the most common objects minus the objects</span>
<span class="c1"># that are most likely left on site</span>
<span class="n">dist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">most_common</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">cont</span><span class="p">))</span>

<span class="c1"># the survey results are being split according to</span>
<span class="c1"># the median value of the selected land use rates</span>
<span class="n">bld_med</span> <span class="o">=</span> <span class="n">fd</span><span class="p">[</span><span class="s2">&quot;% to buildings&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
<span class="n">agg_med</span> <span class="o">=</span> <span class="n">fd</span><span class="p">[</span><span class="s2">&quot;% to agg&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
<span class="n">wood_med</span> <span class="o">=</span> <span class="n">fd</span><span class="p">[</span><span class="s2">&quot;% to woods&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>

<span class="c1"># rural locations are locations that </span>
<span class="n">fd</span><span class="p">[</span><span class="s1">&#39;rural&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="n">fd</span><span class="p">[</span><span class="s2">&quot;% to woods&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">wood_med</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="s2">&quot;% to agg&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">agg_med</span><span class="p">)</span> <span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="s2">&quot;% to buildings&quot;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">bld_med</span><span class="p">)</span>
<span class="n">fd</span><span class="p">[</span><span class="s1">&#39;rural&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fd</span><span class="p">[</span><span class="s1">&#39;rural&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="s1">&#39;rural&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;urban&#39;</span><span class="p">)</span>
<span class="n">fd</span><span class="p">[</span><span class="s1">&#39;rural&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fd</span><span class="p">[</span><span class="s1">&#39;rural&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">fd</span><span class="p">[</span><span class="s1">&#39;rural&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;urban&#39;</span><span class="p">,</span> <span class="s1">&#39;rural&#39;</span><span class="p">)</span>

<span class="c1"># labels for the two groups and a label to catch all the other objects</span>
<span class="n">fd</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;other&#39;</span>
<span class="n">fd</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fd</span><span class="o">.</span><span class="n">group</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="o">~</span><span class="n">fd</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">dist</span><span class="p">),</span> <span class="s1">&#39;DG&#39;</span><span class="p">)</span>
<span class="n">fd</span><span class="p">[</span><span class="s1">&#39;group&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fd</span><span class="o">.</span><span class="n">group</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="o">~</span><span class="n">fd</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">cont</span><span class="p">),</span> <span class="s1">&#39;CG&#39;</span><span class="p">)</span>

<span class="c1"># survey totals of all locations with its land use profile (indifferent of land use)</span>
<span class="n">initial</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;loc_date&#39;</span><span class="p">,</span><span class="s1">&#39;date&#39;</span><span class="p">,</span><span class="s1">&#39;streets&#39;</span><span class="p">,</span> <span class="s1">&#39;intersects&#39;</span><span class="p">]</span>
<span class="n">fd_dt</span><span class="o">=</span><span class="n">fd</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">initial</span><span class="p">,</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">agg_pcs_quantity</span><span class="p">)</span>

<span class="c1"># survey totals of contributed and distributed objects, </span>
<span class="n">second</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;loc_date&#39;</span><span class="p">,</span> <span class="s1">&#39;group&#39;</span><span class="p">,</span> <span class="s1">&#39;rural&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span><span class="s1">&#39;eom&#39;</span><span class="p">,</span> <span class="s1">&#39;river_bassin&#39;</span><span class="p">,</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;streets&#39;</span><span class="p">,</span> <span class="s1">&#39;intersects&#39;</span><span class="p">]</span>
<span class="n">cg_dg_dt</span><span class="o">=</span><span class="n">fd</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">second</span><span class="p">,</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="n">unit_label</span><span class="p">:</span><span class="s2">&quot;sum&quot;</span><span class="p">,</span> <span class="s2">&quot;quantity&quot;</span><span class="p">:</span><span class="s2">&quot;sum&quot;</span><span class="p">})</span>

<span class="c1"># adding the survey total of all objects to each record</span>
<span class="n">cg_dg_dt</span><span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span><span class="o">=</span> <span class="n">cg_dg_dt</span><span class="o">.</span><span class="n">loc_date</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">fd_dq</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="n">x</span><span class="p">],</span> <span class="s1">&#39;quantity&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

<span class="c1"># calculating the % total of contributed and distributed at each survey</span>
<span class="n">cg_dg_dt</span><span class="p">[</span><span class="s1">&#39;pt&#39;</span><span class="p">]</span><span class="o">=</span> <span class="n">cg_dg_dt</span><span class="o">.</span><span class="n">quantity</span><span class="o">/</span><span class="n">cg_dg_dt</span><span class="o">.</span><span class="n">dt</span>

<span class="n">rural</span> <span class="o">=</span> <span class="n">cg_dg_dt</span><span class="p">[(</span><span class="n">cg_dg_dt</span><span class="p">[</span><span class="s1">&#39;rural&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;rural&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="n">urban</span> <span class="o">=</span> <span class="n">cg_dg_dt</span><span class="p">[(</span><span class="n">cg_dg_dt</span><span class="p">[</span><span class="s1">&#39;rural&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;urban&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="n">grt_dtr</span> <span class="o">=</span> <span class="n">cg_dg_dt</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;loc_date&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span><span class="s1">&#39;rural&#39;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="n">unit_label</span><span class="p">:</span><span class="s2">&quot;sum&quot;</span><span class="p">})</span>

<span class="c1"># check the survey totals for each group</span>
<span class="n">astring</span> <span class="o">=</span> <span class="sa">F</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">There were </span><span class="si">{</span><span class="n">t</span><span class="p">[</span><span class="s2">&quot;nsamples&quot;</span><span class="p">]</span><span class="si">}</span><span class="s2"> surveys  at </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="s2">&quot;locations&quot;</span><span class="p">])</span><span class="si">}</span><span class="s2"> different locations.</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="n">md</span><span class="p">(</span><span class="n">astring</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<p>There were 300 surveys  at 84 different locations.</p>
</div>
</div>
<div class="cell tag_remove-input docutils container">
</div>
<p><em>Survey results urban and rural locations March 2020 - May 2021. <strong>Left</strong>: Survey totals urban v/s rural, n=300. <strong>Right</strong>: distribution of survey results urban - rural with detail of code-group results.</em></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># months locator, can be confusing</span>
<span class="c1"># https://matplotlib.org/stable/api/dates_api.html</span>
<span class="n">months</span> <span class="o">=</span> <span class="n">mdates</span><span class="o">.</span><span class="n">MonthLocator</span><span class="p">(</span><span class="n">interval</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">months_fmt</span> <span class="o">=</span> <span class="n">mdates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s1">&#39;%b&#39;</span><span class="p">)</span>
<span class="n">days</span> <span class="o">=</span> <span class="n">mdates</span><span class="o">.</span><span class="n">DayLocator</span><span class="p">(</span><span class="n">interval</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">group_palette</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;CG&#39;</span><span class="p">:</span><span class="s1">&#39;magenta&#39;</span><span class="p">,</span> <span class="s1">&#39;DG&#39;</span><span class="p">:</span><span class="s1">&#39;teal&#39;</span><span class="p">,</span> <span class="s1">&#39;other&#39;</span><span class="p">:</span><span class="s1">&#39;tan&#39;</span><span class="p">}</span>
<span class="n">rural_palette</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;rural&#39;</span><span class="p">:</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="s1">&#39;urban&#39;</span><span class="p">:</span><span class="s1">&#39;salmon&#39;</span> <span class="p">}</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">grt_dtr</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">unit_label</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;rural&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">rural_palette</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">grt_dtr</span><span class="p">[</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">.98</span><span class="p">)</span><span class="o">+</span><span class="mi">50</span> <span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">unit_label</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">xlab_k14</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">days</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">months_fmt</span><span class="p">)</span>

<span class="n">axtwo</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="n">box_props</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;boxprops&#39;</span><span class="p">:{</span><span class="s1">&#39;facecolor&#39;</span><span class="p">:</span><span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="s1">&#39;edgecolor&#39;</span><span class="p">:</span><span class="s1">&#39;black&#39;</span><span class="p">},</span>
    <span class="s1">&#39;medianprops&#39;</span><span class="p">:{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span><span class="s1">&#39;black&#39;</span><span class="p">},</span>
    <span class="s1">&#39;whiskerprops&#39;</span><span class="p">:{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span><span class="s1">&#39;black&#39;</span><span class="p">},</span>
    <span class="s1">&#39;capprops&#39;</span><span class="p">:{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span><span class="s1">&#39;black&#39;</span><span class="p">}</span>
<span class="p">}</span>

<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">grt_dtr</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;rural&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">unit_label</span><span class="p">,</span> <span class="n">dodge</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">showfliers</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axtwo</span><span class="p">,</span> <span class="o">**</span><span class="n">box_props</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">stripplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">cg_dg_dt</span><span class="p">,</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;rural&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">unit_label</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axtwo</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;group&#39;</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">group_palette</span><span class="p">,</span> <span class="n">jitter</span><span class="o">=</span><span class="mf">.35</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="n">axtwo</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">unit_label</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">xlab_k14</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">axtwo</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">axtwo</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/shared_responsibility_13_0.png" src="_images/shared_responsibility_13_0.png" />
</div>
</div>
<p><em>Summary data all survey totals</em></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">change_names</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;count&#39;</span><span class="p">:</span><span class="s1">&#39;# samples&#39;</span><span class="p">,</span> 
                <span class="s1">&#39;mean&#39;</span><span class="p">:</span><span class="sa">F</span><span class="s2">&quot;average </span><span class="si">{</span><span class="n">unit_label</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="s1">&#39;std&#39;</span><span class="p">:</span><span class="s1">&#39;standard deviation&#39;</span><span class="p">,</span> 
                <span class="s1">&#39;min p/50m&#39;</span><span class="p">:</span><span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;25%&#39;</span><span class="p">:</span><span class="s1">&#39;25%&#39;</span><span class="p">,</span>
                <span class="s1">&#39;50%&#39;</span><span class="p">:</span><span class="s1">&#39;50%&#39;</span><span class="p">,</span> <span class="s1">&#39;75%&#39;</span><span class="p">:</span><span class="s1">&#39;75%&#39;</span><span class="p">,</span>
                <span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="sa">F</span><span class="s2">&quot;max </span><span class="si">{</span><span class="n">unit_label</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="sa">F</span><span class="s2">&quot;min </span><span class="si">{</span><span class="n">unit_label</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="s1">&#39;total objects&#39;</span><span class="p">:</span><span class="s1">&#39;total objects&#39;</span><span class="p">,</span>
                <span class="s1">&#39;# locations&#39;</span><span class="p">:</span><span class="s1">&#39;# locations&#39;</span><span class="p">,</span>
                <span class="s1">&#39;survey year&#39;</span><span class="p">:</span><span class="s1">&#39;survey year&#39;</span>
               <span class="p">}</span>

<span class="c1"># convenience function to change the index names in a series</span>
<span class="k">def</span> <span class="nf">anew_dict</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">new_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
        <span class="n">new_dict</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">change_names</span><span class="p">[</span><span class="n">param</span><span class="p">]:</span><span class="n">x</span><span class="p">[</span><span class="n">param</span><span class="p">]})</span>
    <span class="k">return</span> <span class="n">new_dict</span>  

<span class="c1"># select data</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">grt_dtr</span>

<span class="c1"># get the basic statistics from pd.describe</span>
<span class="n">desc_2020</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;rural&#39;</span><span class="p">)[</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
<span class="n">desc_2020</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;all surveys&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;std&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;25%&#39;</span><span class="p">,</span> <span class="s1">&#39;50%&#39;</span><span class="p">,</span> <span class="s1">&#39;75%&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">grt_dtr</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;loc_date&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">])[</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
<span class="n">desc</span> <span class="o">=</span> <span class="n">desc_2020</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">)</span>
<span class="n">desc</span> <span class="o">=</span> <span class="n">desc</span><span class="o">.</span><span class="n">applymap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">F</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">desc</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;count&#39;</span><span class="p">:</span><span class="s1">&#39;samples&#39;</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">desc</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># make tables</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mf">3.4</span><span class="p">))</span>

<span class="c1"># summary table</span>
<span class="c1"># names for the table columns</span>
<span class="n">a_col</span> <span class="o">=</span> <span class="p">[</span><span class="n">top_name</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;total&#39;</span><span class="p">]</span>

<span class="n">axone</span> <span class="o">=</span> <span class="n">axs</span>
<span class="n">sut</span><span class="o">.</span><span class="n">hide_spines_ticks_grids</span><span class="p">(</span><span class="n">axone</span><span class="p">)</span>

<span class="n">a_table</span> <span class="o">=</span> <span class="n">axone</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">cellText</span><span class="o">=</span><span class="n">desc</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>  <span class="n">colLabels</span><span class="o">=</span><span class="n">desc</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">colWidths</span><span class="o">=</span><span class="p">[</span><span class="mf">.19</span><span class="p">,</span><span class="o">*</span><span class="p">[</span><span class="mf">.1</span><span class="p">]</span><span class="o">*</span><span class="mi">8</span><span class="p">],</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;lower center&#39;</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">the_material_table_data</span> <span class="o">=</span> <span class="n">sut</span><span class="o">.</span><span class="n">make_a_summary_table</span><span class="p">(</span><span class="n">a_table</span><span class="p">,</span><span class="n">desc</span><span class="o">.</span><span class="n">values</span><span class="p">,</span><span class="n">desc</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">s_et_bottom_row</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>


<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/shared_responsibility_15_0.png" src="_images/shared_responsibility_15_0.png" />
</div>
</div>
<p><em><strong>Above: differences between urban and rural survey totals.</strong> Survey results in rural locations had a lower median and mean than urban locations and all locations combined. The maximum and the minimum values as well as the highest standard deviation were recorded at urban locations. The 95% confidence intervals of the median value of urban and rural survey results do not overlap, Annex 1.</em></p>
<div class="section" id="assessment-of-composition-the-big-picture">
<h3><span class="section-number">20.3.1. </span>Assessment of composition: the big picture<a class="headerlink" href="#assessment-of-composition-the-big-picture" title="Permalink to this headline">¶</a></h3>
<p>The ratio of total DG to total CG in the rural group was 2.5, in the urban group it was 1.6. On a per survey basis, DG was a greater percent of the total in all surveys from rural locations. In urban locations DG and CG compose almost equal portions of the survey total.</p>
<blockquote>
<div><p>Sample results from rural locations had a greater portion of litter attributed to fragmented plastics, construction plastics and foams.</p>
</div></blockquote>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># </span>

<span class="n">dists</span> <span class="o">=</span> <span class="n">cg_dg_dt</span><span class="p">[(</span><span class="n">cg_dg_dt</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">DG</span><span class="p">)][[</span><span class="s1">&#39;loc_date&#39;</span><span class="p">,</span> <span class="s1">&#39;location&#39;</span><span class="p">,</span><span class="s1">&#39;rural&#39;</span><span class="p">,</span> <span class="n">unit_label</span><span class="p">]]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;loc_date&#39;</span><span class="p">)</span>
<span class="n">conts</span> <span class="o">=</span> <span class="n">cg_dg_dt</span><span class="p">[(</span><span class="n">cg_dg_dt</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">CG</span><span class="p">)][[</span><span class="s1">&#39;loc_date&#39;</span><span class="p">,</span> <span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;rural&#39;</span><span class="p">,</span> <span class="n">unit_label</span><span class="p">]]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;loc_date&#39;</span><span class="p">)</span>
<span class="n">conts</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="n">unit_label</span><span class="p">:</span><span class="n">CG</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dists</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="n">unit_label</span><span class="p">:</span><span class="n">DG</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">c_v_d</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">dists</span><span class="p">,</span> <span class="n">conts</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">c_v_d</span><span class="p">[</span><span class="s1">&#39;dt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">c_v_d</span><span class="p">[</span><span class="n">DG</span><span class="p">]</span><span class="o">/</span><span class="n">c_v_d</span><span class="p">[</span><span class="n">CG</span><span class="p">]</span>

<span class="c1"># the ratio of dist to cont under the two land use conditions</span>
<span class="n">ratio_of_d_c_agg</span> <span class="o">=</span> <span class="n">c_v_d</span><span class="p">[</span><span class="n">c_v_d</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;rural&#39;</span><span class="p">][</span><span class="n">DG</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="n">c_v_d</span><span class="p">[</span><span class="n">c_v_d</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;rural&#39;</span><span class="p">][</span><span class="n">CG</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">ratio_of_d_c_urb</span><span class="o">=</span> <span class="n">c_v_d</span><span class="p">[</span><span class="n">c_v_d</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;urban&#39;</span><span class="p">][</span><span class="n">DG</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="n">c_v_d</span><span class="p">[</span><span class="n">c_v_d</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;urban&#39;</span><span class="p">][</span><span class="n">CG</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="c1"># chart that</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>

<span class="c1"># get the eCDF of percent of total for each object group under each condition</span>

<span class="c1"># p of t urban</span>
<span class="n">co_agecdf</span> <span class="o">=</span> <span class="n">ECDF</span><span class="p">(</span><span class="n">cg_dg_dt</span><span class="p">[(</span><span class="n">cg_dg_dt</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;urban&#39;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">cg_dg_dt</span><span class="o">.</span><span class="n">group</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="n">CG</span><span class="p">]))][</span><span class="s2">&quot;pt&quot;</span><span class="p">])</span>
<span class="n">di_agecdf</span> <span class="o">=</span> <span class="n">ECDF</span><span class="p">(</span><span class="n">cg_dg_dt</span><span class="p">[(</span><span class="n">cg_dg_dt</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;urban&#39;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">cg_dg_dt</span><span class="o">.</span><span class="n">group</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="n">DG</span><span class="p">]))][</span><span class="s2">&quot;pt&quot;</span><span class="p">])</span>

<span class="c1"># p of t rural</span>
<span class="n">cont_ecdf</span> <span class="o">=</span> <span class="n">ECDF</span><span class="p">(</span><span class="n">cg_dg_dt</span><span class="p">[(</span><span class="n">cg_dg_dt</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;rural&#39;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">cg_dg_dt</span><span class="o">.</span><span class="n">group</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="n">CG</span><span class="p">]))][</span><span class="s2">&quot;pt&quot;</span><span class="p">])</span>
<span class="n">dist_ecdf</span> <span class="o">=</span> <span class="n">ECDF</span><span class="p">(</span><span class="n">cg_dg_dt</span><span class="p">[(</span><span class="n">cg_dg_dt</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;rural&#39;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">cg_dg_dt</span><span class="o">.</span><span class="n">group</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="n">DG</span><span class="p">]))][</span><span class="s2">&quot;pt&quot;</span><span class="p">])</span>

<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">cont_ecdf</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">cont_ecdf</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;salmon&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;rural: CG&quot;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">co_agecdf</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">co_agecdf</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;magenta&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;urban: CG&quot;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">dist_ecdf</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">dist_ecdf</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;teal&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;rural: DG&quot;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">di_agecdf</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">di_agecdf</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;urban: DG&quot;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">% o</span><span class="s2">f survey total&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">xlab_k14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">% o</span><span class="s2">f surveys&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">xlab_k14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;lower right&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">% o</span><span class="s2">f total&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/shared_responsibility_18_0.png" src="_images/shared_responsibility_18_0.png" />
</div>
</div>
</div>
<div class="section" id="distribution-of-survey-totals-for-the-different-object-groups">
<h3><span class="section-number">20.3.2. </span>Distribution of survey totals for the different object groups<a class="headerlink" href="#distribution-of-survey-totals-for-the-different-object-groups" title="Permalink to this headline">¶</a></h3>
<p>The survey results of the DG are very similar under both land use classes, there is more variance as the reported value increases but not so much that the distributions diverge. Given the standard deviation of the samples and the high variance of beach-litter-survey data in general this is expected. <span id="id13">[<a class="reference internal" href="references.html#id42">HG19</a>]</span></p>
<p>The two sample Kolmogorov-Smirnov(KS) test(ks=0.073, p=0.808) of the two sets of survey results suggest that <strong>the survey results of DG  may not be significantly different between the two land use classes</strong>. The results from the Mann-Whitney <em>U</em> (MWU) (U=11445.0, p=0.762) <em>suggest that it is possible that the two distributions are the same.</em>*</p>
<p><em><strong>Below:</strong> empirical cumulative distribution (eCDF) of DG and CG. <strong>Left:</strong> recall that DG objects included fragmented plastics, fragmented foams, construction plastics and production pellets. <strong>Right:</strong>  the survey results for cigarette ends and snack wrappers have visually distinct distributions under the two land use conditions.</em></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># the dg group objects evaluated at rural locations</span>
<span class="n">d_r_a</span> <span class="o">=</span> <span class="n">cg_dg_dt</span><span class="p">[(</span><span class="n">cg_dg_dt</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;rural&#39;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">cg_dg_dt</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">DG</span><span class="p">)]</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;loc_date&#39;</span><span class="p">,</span> <span class="s1">&#39;group&#39;</span><span class="p">])[</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">dist_results_agg</span> <span class="o">=</span> <span class="n">d_r_a</span><span class="o">.</span><span class="n">values</span>
<span class="n">a_d_ecdf</span> <span class="o">=</span> <span class="n">ECDF</span><span class="p">(</span><span class="n">dist_results_agg</span> <span class="p">)</span>

<span class="c1"># the dg objects evaluated at urban locations</span>
<span class="n">d_r_u</span> <span class="o">=</span> <span class="n">cg_dg_dt</span><span class="p">[(</span><span class="n">cg_dg_dt</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;urban&#39;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">cg_dg_dt</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">DG</span><span class="p">)]</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;loc_date&#39;</span><span class="p">,</span> <span class="s1">&#39;group&#39;</span><span class="p">])[</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">dist_results_urb</span> <span class="o">=</span> <span class="n">d_r_u</span><span class="o">.</span><span class="n">values</span>
<span class="n">b_d_ecdf</span> <span class="o">=</span> <span class="n">ECDF</span><span class="p">(</span><span class="n">dist_results_urb</span> <span class="p">)</span>

<span class="c1"># the CG objects evaluated at rural locations</span>
<span class="n">c_r_a</span> <span class="o">=</span> <span class="n">cg_dg_dt</span><span class="p">[(</span><span class="n">cg_dg_dt</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;rural&#39;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">cg_dg_dt</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">CG</span><span class="p">)]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;loc_date&#39;</span><span class="p">)[</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">cont_results_agg</span> <span class="o">=</span> <span class="n">c_r_a</span><span class="o">.</span><span class="n">values</span>
<span class="n">a_d_ecdf_cont</span> <span class="o">=</span> <span class="n">ECDF</span><span class="p">(</span><span class="n">cont_results_agg</span><span class="p">)</span>

<span class="c1"># the CG objects evaluated at urban locations</span>
<span class="n">c_r_u</span> <span class="o">=</span> <span class="n">cg_dg_dt</span><span class="p">[(</span><span class="n">cg_dg_dt</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;urban&#39;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">cg_dg_dt</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">CG</span><span class="p">)]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;loc_date&#39;</span><span class="p">)[</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">cont_results_urb</span> <span class="o">=</span> <span class="n">c_r_u</span><span class="o">.</span><span class="n">values</span>
<span class="n">b_d_ecdf_cont</span> <span class="o">=</span> <span class="n">ECDF</span><span class="p">(</span><span class="n">cont_results_urb</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>

<span class="n">axone</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">a_d_ecdf</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">a_d_ecdf</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;salmon&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;rural&quot;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axone</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">b_d_ecdf</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">b_d_ecdf</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;urban&quot;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axone</span><span class="p">)</span>
<span class="n">axone</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">unit_label</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">xlab_k14</span><span class="p">)</span>
<span class="n">axone</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">% o</span><span class="s1">f surveys&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">xlab_k14</span><span class="p">)</span>
<span class="n">axone</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">DG</span><span class="p">,</span><span class="n">title_fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>


<span class="n">axtwo</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">a_d_ecdf_cont</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">a_d_ecdf_cont</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;salmon&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;rural&quot;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axtwo</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">b_d_ecdf_cont</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">b_d_ecdf_cont</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;urban&quot;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axtwo</span><span class="p">)</span>

<span class="n">axtwo</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">unit_label</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">xlab_k14</span><span class="p">)</span>
<span class="n">axtwo</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="n">axtwo</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">CG</span><span class="p">,</span><span class="n">title_fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/shared_responsibility_21_0.png" src="_images/shared_responsibility_21_0.png" />
</div>
</div>
<p>According to the KS test (rho=0.09, p=0.48) there is no statistical reason to assume that more DG objects are found under the difference land use conditions, according to the MWU test  (MWU=1039, p=0.25) there is a chance that the incidence of DG objects is the same indifferent of the land use profile. On the other hand the CG survey results diverge almost immediately and results of the KS test  (rho=0.31, p&lt;.001)  and MWU (MWU=7305, p&lt;.001) suggest that the distribution of these objects is associated with % of land attributed to buildings.</p>
<div class="section" id="difference-of-means">
<h4><span class="section-number">20.3.2.1. </span>Difference of means<a class="headerlink" href="#difference-of-means" title="Permalink to this headline">¶</a></h4>
<p>The average survey result of DG objects in rural locations was 202p/100m as opposed to 237p/100m at urban locations, a difference of -35p/100m is just a small fraction of the standard deviation. A permutation test on the difference of means was conducted on the condition <em>rural</em> - <em>urban</em> of the mean of survey data.</p>
<p><em>Difference of means DG objects. <span class="math notranslate nohighlight">\(\mu_{rural}\)</span> - <span class="math notranslate nohighlight">\(\mu_{urban}\)</span>, method=shuffle, permutations=5000.</em></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># for display purposes: the results of the ks and MWU tests for DG objects</span>
<span class="c1"># print(stats.ks_2samp(dist_results_agg, dist_results_urb, alternative=&#39;two-sided&#39;, mode=&#39;auto&#39;))</span>
<span class="c1"># print(stats.mannwhitneyu(dist_results_agg,dist_results_urb, alternative=&#39;two-sided&#39;))</span>

<span class="c1"># for display purposes: the results of the ks and MWU tests for CG objects</span>
<span class="c1"># print(stats.ks_2samp(cont_results_agg, cont_results_urb, alternative=&#39;two-sided&#39;, mode=&#39;auto&#39;))</span>
<span class="c1"># print(stats.mannwhitneyu(cont_results_agg, cont_results_urb, alternative=&#39;two-sided&#39;))</span>

<span class="c1"># combine the DG results from both land use classess</span>
<span class="n">agdg</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">d_r_a</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
<span class="n">budg</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">d_r_u</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>

<span class="c1"># label the urban and rural results</span>
<span class="n">agdg</span><span class="p">[</span><span class="s2">&quot;class&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;rural&#39;</span>
<span class="n">budg</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;urban&#39;</span>

<span class="c1"># merge into one </span>
<span class="n">dg_merg</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">agdg</span><span class="p">,</span> <span class="n">budg</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># store the mean per class</span>
<span class="n">the_mean</span> <span class="o">=</span> <span class="n">dg_merg</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">)[</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># store the difference</span>
<span class="n">mean_diff</span> <span class="o">=</span> <span class="n">the_mean</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;rural&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">the_mean</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;urban&#39;</span><span class="p">]</span>
<span class="n">new_means</span><span class="o">=</span><span class="p">[]</span>
<span class="c1"># permutation resampling:</span>
<span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5000</span><span class="p">):</span>
    <span class="n">dg_merg</span><span class="p">[</span><span class="s1">&#39;new_class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dg_merg</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">frac</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
    <span class="n">b</span><span class="o">=</span><span class="n">dg_merg</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;new_class&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">new_means</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">b</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;rural&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">b</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;urban&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">emp_p</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span><span class="n">new_means</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">the_mean</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;rural&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">the_mean</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;urban&#39;</span><span class="p">]))</span> <span class="o">/</span> <span class="mi">5000</span>

<span class="c1"># chart the results</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">new_means</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">F</span><span class="s2">&quot;$</span><span class="se">\u0394</span><span class="s2">\mu$ = </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">mean_diff</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2">, perm=5000, p=</span><span class="si">{</span><span class="n">emp_p</span><span class="si">}</span><span class="s2"> &quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">title_k14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;permutations&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">xlab_k14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;$\mu$ rural=</span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">the_mean</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;rural&#39;</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> - $\mu$ urban=</span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">the_mean</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;urban&#39;</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">xlab_k14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/shared_responsibility_24_0.png" src="_images/shared_responsibility_24_0.png" />
</div>
</div>
<p><em><strong>Above:</strong> refuse to reject the null hypothesis that these two distributions may be the same. The observed difference of means falls within the 95% interval of the bootstrap results.</em></p>
</div>
</div>
</div>
<div class="section" id="conclusion">
<h2><span class="section-number">20.4. </span>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<p>A positive statistically relevant association between CG objects and land use attributed to infrastructure such as streets, recreation areas and buildings can be assumed. Representing 4/12 most common objects, they represent approximately 26% of all objects found and can be associated to activities within 1500m of the survey location.</p>
<p>In contrast the DG group has an <span class="math notranslate nohighlight">\(\approxeq\)</span> distribution under the different land use classes and no association to the percent of land attributed to buildings. Composed of construction plastics, fragmented foams and plastics and industrial pellets the DG represents a diverse group of objects with different densities. With no statistical evidence to the contrary the null hypothesis cannot be rejected. <strong>Therefore it can not be assumed that the primary source was within 1500m of the survey location and that a portion of these objects have origins upstream</strong> (economically and geographically).</p>
<p><em><strong>Below:</strong> establishing objective criteria. Identifying and counting the objects after a litter survey can be done on the beach, if the weather permits. The inventory is always completed on paper in a designated notebook and then entered in to the app <a class="reference external" href="https://www.plagespropres.ch">The litter surveyor</a>. Objects of interest in this photo: plastic shotgun wadding, agricultural fencing and tile spacer.</em></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sut</span><span class="o">.</span><span class="n">display_image_ipython</span><span class="p">(</span><span class="s2">&quot;resources/images/baselines/takingnotes.jpg&quot;</span><span class="p">,</span> <span class="n">thumb</span><span class="o">=</span><span class="p">(</span><span class="mi">1200</span><span class="p">,</span> <span class="mi">700</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/shared_responsibility_28_0.png" src="_images/shared_responsibility_28_0.png" />
</div>
</div>
<div class="section" id="discussion">
<h3><span class="section-number">20.4.1. </span>Discussion<a class="headerlink" href="#discussion" title="Permalink to this headline">¶</a></h3>
<p>By comparing the survey results to the independent variables around the survey locations a numerical representation can be established that describes how likely the object was discarded where it was found. In the case of cigarette ends and candy wrappers the association established numerically is reinforced by daily experience, it is within buildings that cigarettes and snacks are purchased. It is appropriate to assume that a portion would be consumed directly and that some of the associated wrappers would escape into the environment.</p>
<p>For other objects the connection or the source may not be evident or even visible from the survey location. Objects that are distinct and whose use is limited to relatively small portions of the economy present particular challenges. Because of hydrologic transport these objects may be found all over the region but there may be a limited number of zones of accumulation, making it difficult to identify the source.</p>
<p>However, the previous example shows that survey results increase or decrease in response to explanatory variables. For objects such as the <em>plastic production pellet</em> (GPI) the use case of the item is definite and users and producers are relatively rare with respect to other litter items. Even though these objects are found in all survey areas it is unlikely that they are emitted at equal rates. Given the previous example it is possible to follow the increasing survey results of GPI on two different lakes to understand how this relationship can be visualized.</p>
<p><em><strong>Below:</strong> the increase in the median p/100m as surveys approach the upstream source of. GPI are small and difficult to clean up once they have been spilled making the exact source impossible to determine. However it is reasonable to assume that the handlers and consumers of GPI will have the best ideas on how to prevent them from escaping into the environment. The probability of finding at least one is double the regional rate at some of the locations below.</em></p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="_images/shared_responsibility_30_0.png" src="_images/shared_responsibility_30_0.png" />
</div>
</div>
<div class="section" id="finding-partners">
<h4><span class="section-number">20.4.1.1. </span>Finding partners<a class="headerlink" href="#finding-partners" title="Permalink to this headline">¶</a></h4>
<p>The results from the test indicate that CG objects are more prevalent in urban locations. Urban was defined as the land use within 1500m of the survey area. From this it is safe to assume that the cause(s) of CG group litter are also more prevalent in urban areas and that the secondary cause of the litter is within 1500m of the survey location.</p>
<p>Stakeholders looking to reduce the incidence of CG objects within a specific zone may have a better chance of finding motivated partners within 1500m of the location of concern.</p>
<p>The DG group has the particularity that it is distributed in <span class="math notranslate nohighlight">\(\approx\)</span> rates indifferent of the land use and it makes up a larger proportion of the objects found than CG. This implies that <strong>the solution is at a larger scale</strong> than the municipal boundaries.</p>
<p>Fragmented plastics is the only DG object on the list that cannot be attributed to at least one industry that is present in all the survey areas covered by this analysis.</p>
<ul class="simple">
<li><p>Expanded polystyrene is used as an exterior insulation envelope in the construction industry and is also used in packaging to protect fragile objects during transport.</p></li>
<li><p>Plastic production pellets are used to make plastic objects in the injection molding process.</p></li>
<li><p>Cotton swabs are often diverted to rivers and lakes after passing through a water treatment plant.</p></li>
<li><p>Industrial sheeting is used in horticulture, transport and the construction industry.</p></li>
<li><p>Construction plastics</p></li>
</ul>
<p>Finding partners for these objects may involve an initial phase of informative targeted communication that calls attention to these study results, and current EU thresholds and baselines for beach litter <span id="id14">[<a class="reference internal" href="references.html#id42">HG19</a>]</span>.</p>
</div>
<div class="section" id="sharing-the-responsibility">
<h4><span class="section-number">20.4.1.2. </span>Sharing the responsibility<a class="headerlink" href="#sharing-the-responsibility" title="Permalink to this headline">¶</a></h4>
<p>The principle of Extended Producer Responsibility (EPR) may provide the incentive to producers and consumers to account for the real costs of end-of-life management for the most common litter items identified in Switzerland. <span id="id15">[<a class="reference internal" href="references.html#id77">Pou20</a>]</span></p>
<p>A recent study in the Marine Policy journal identified several limitations of using preexisting beach litter survey data to assess the impact of EPR policy on observed litter quantities. <span id="id16">[<a class="reference internal" href="references.html#id75">HLCM21</a>]</span></p>
<ol class="simple">
<li><p>Limited data</p></li>
<li><p>Heterogeneous methods</p></li>
<li><p>Data not collected for the purposes of evaluating ERP</p></li>
</ol>
<p>To correct these limitations the authors provide the following recommendations:</p>
<ol class="simple">
<li><p>Create a data framework specifically for monitoring ERP targets</p></li>
<li><p>Identify sources</p></li>
<li><p>Use litter counts to establish baselines</p></li>
<li><p>Frequent monitoring</p></li>
</ol>
<p>Litter counts mitigate the effects of light-weight packaging when collection results are based on weights. <span id="id17">[<a class="reference internal" href="references.html#id75">HLCM21</a>]</span></p>
<p>The IQAASl project addresses three out of the four recommendations and it introduced a method that allows stakeholders to add specific items to the survey protocol. Thus monitoring progress towards ERP targets can be implemented as long as the objects can be defined visually and can be counted.</p>
<p>The current database of beach-litter surveys in Switzerland includes over 1,000 samples collected using the same protocol in the past six years. Switzerland has all the elements in place to accurately estimate minimum probable values for the most common objects and evaluate stochastic.</p>
<p>This report offers several different ways to evaluate differences between survey results, there are certainly others that should be considered. There are many improvements to be made concerning the national strategy:</p>
<ol class="simple">
<li><p>Defining a standardized reporting method for municipal, cantonal and federal stakeholders</p></li>
<li><p>Define monitoring or assessment goals</p></li>
<li><p>Formalize the data repository and the method for implementation at different administrative levels</p></li>
<li><p>Develop a network of associations that share the responsibility and resources for surveying the territory</p></li>
<li><p>Develop and implement a formal training program for surveyors that includes data science, and GIS technologies</p></li>
<li><p>Determine, in collaboration with academic partners, ideal sampling scenarios and research needs</p></li>
<li><p>Develop a financing method to ensure that enough samples are collected each year in each survey area so that accurate assessments can be made and research requirements are met.</p></li>
</ol>
</div>
</div>
</div>
<div class="section" id="annex">
<h2><span class="section-number">20.5. </span>Annex<a class="headerlink" href="#annex" title="Permalink to this headline">¶</a></h2>
<p>Organizations that collected samples</p>
<ol class="simple">
<li><p>Precious plastic leman</p></li>
<li><p>Association pour la sauvetage du Léman</p></li>
<li><p>Geneva international School</p></li>
<li><p>Solid waste management: École polytechnique fédérale Lausanne</p></li>
<li><p>Hamerdirt</p></li>
<li><p>Hackuarium</p></li>
<li><p>WWF Switzerland</p></li>
</ol>
<div class="section" id="results-of-speramans-ranked-correlation-test">
<h3><span class="section-number">20.5.1. </span>Results of Speramans ranked correlation test<a class="headerlink" href="#results-of-speramans-ranked-correlation-test" title="Permalink to this headline">¶</a></h3>
<p>An association is a relationship between the survey results and the land use profile that is unlikely due to chance. The magnitude of the relationship is neither defined nor linear.</p>
<p>Ranked correlation is a non-parametric test to determine if there is a statistically significant relationship between land use and the objects identified in a litter survey.</p>
<p>The method used is the Spearman’s rho or Spearmans ranked correlation coefficient. The test results are evaluated at p&lt;0.05 for all valid lake samples in the survey area.</p>
<ol class="simple">
<li><p>Red/rose is a positive association</p></li>
<li><p>Yellow is a negative association</p></li>
<li><p>White means that p&gt;0.05, there is no statistical basis to assume an association</p></li>
</ol>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="_images/shared_responsibility_35_0.png" src="_images/shared_responsibility_35_0.png" />
</div>
</div>
<p><em><strong>Below:</strong> 95% confidence interval of the median survey value under the different land use classes.</em></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># this code was modified from this source:</span>
<span class="c1"># http://bebi103.caltech.edu.s3-website-us-east-1.amazonaws.com/2019a/content/recitations/bootstrapping.html</span>
<span class="c1"># if you want to get the confidence interval around another point estimate use np.percentile</span>
<span class="c1"># and add the percentile value as a parameter</span>

<span class="k">def</span> <span class="nf">draw_bs_sample</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Draw a bootstrap sample from a 1D data set.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">compute_jackknife_reps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">statfunction</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stat_param</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Returns jackknife resampled replicates for the given data and statistical function&#39;&#39;&#39;</span>
    <span class="c1"># Set up empty array to store jackknife replicates</span>
    <span class="n">jack_reps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>

    <span class="c1"># For each observation in the dataset, compute the statistical function on the sample</span>
    <span class="c1"># with that observation removed</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)):</span>
        <span class="n">jack_sample</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">stat_param</span><span class="p">:</span>
            <span class="n">jack_reps</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">statfunction</span><span class="p">(</span><span class="n">jack_sample</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">jack_reps</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">statfunction</span><span class="p">(</span><span class="n">jack_sample</span><span class="p">,</span> <span class="n">stat_param</span><span class="p">)</span>          
        
    <span class="k">return</span> <span class="n">jack_reps</span>


<span class="k">def</span> <span class="nf">compute_a</span><span class="p">(</span><span class="n">jack_reps</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Returns the acceleration constant a&#39;&#39;&#39;</span>

    <span class="n">mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">jack_reps</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">a</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([(</span><span class="n">x</span><span class="o">**-</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span> <span class="p">(</span><span class="n">mean</span><span class="o">**-</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)))</span><span class="o">**</span><span class="mi">3</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">jack_reps</span><span class="p">)])</span>
        <span class="n">b</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([(</span><span class="n">x</span><span class="o">**-</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">-</span><span class="n">mean</span><span class="o">-</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">jack_reps</span><span class="p">)])</span>
        <span class="n">c</span> <span class="o">=</span> <span class="mi">6</span><span class="o">*</span><span class="p">(</span><span class="n">b</span><span class="o">**</span><span class="p">(</span><span class="mi">3</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">a</span><span class="o">/</span><span class="n">c</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">mean</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">data</span>


<span class="k">def</span> <span class="nf">bootstrap_replicates</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n_reps</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">statfunction</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stat_param</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Computes n_reps number of bootstrap replicates for given data and statistical function&#39;&#39;&#39;</span>
    <span class="n">boot_reps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">n_reps</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_reps</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">stat_param</span><span class="p">:</span>
            <span class="n">boot_reps</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">statfunction</span><span class="p">(</span><span class="n">draw_bs_sample</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">boot_reps</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">statfunction</span><span class="p">(</span><span class="n">draw_bs_sample</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">stat_param</span><span class="p">)</span>     
        
    <span class="k">return</span> <span class="n">boot_reps</span>


<span class="k">def</span> <span class="nf">compute_z0</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">boot_reps</span><span class="p">,</span> <span class="n">statfunction</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stat_param</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Computes z0 for given data and statistical function&#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">stat_param</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">statfunction</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">statfunction</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">stat_param</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="o">.</span><span class="n">ppf</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">boot_reps</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">boot_reps</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">compute_bca_ci</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">alpha_level</span><span class="p">,</span> <span class="n">n_reps</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">statfunction</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stat_param</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Returns BCa confidence interval for given data at given alpha level&#39;&#39;&#39;</span>
    <span class="c1"># Compute bootstrap and jackknife replicates</span>
    <span class="n">boot_reps</span> <span class="o">=</span> <span class="n">bootstrap_replicates</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n_reps</span><span class="p">,</span> <span class="n">statfunction</span><span class="o">=</span><span class="n">statfunction</span><span class="p">,</span> <span class="n">stat_param</span><span class="o">=</span><span class="n">stat_param</span><span class="p">)</span>
    <span class="n">jack_reps</span> <span class="o">=</span> <span class="n">compute_jackknife_reps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">statfunction</span><span class="o">=</span><span class="n">statfunction</span><span class="p">,</span> <span class="n">stat_param</span><span class="o">=</span><span class="n">stat_param</span><span class="p">)</span>

    <span class="c1"># Compute a and z0</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">compute_a</span><span class="p">(</span><span class="n">jack_reps</span><span class="p">)</span>
    <span class="n">z0</span> <span class="o">=</span> <span class="n">compute_z0</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">boot_reps</span><span class="p">,</span> <span class="n">statfunction</span><span class="o">=</span><span class="n">statfunction</span><span class="p">,</span> <span class="n">stat_param</span><span class="o">=</span><span class="n">stat_param</span><span class="p">)</span>

    <span class="c1"># Compute confidence interval indices</span>
    <span class="n">alphas</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">alpha_level</span><span class="o">/</span><span class="mf">2.</span><span class="p">,</span> <span class="mi">1</span><span class="o">-</span><span class="n">alpha_level</span><span class="o">/</span><span class="mf">2.</span><span class="p">])</span>
    <span class="n">zs</span> <span class="o">=</span> <span class="n">z0</span> <span class="o">+</span> <span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="o">.</span><span class="n">ppf</span><span class="p">(</span><span class="n">alphas</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">alphas</span><span class="o">.</span><span class="n">shape</span><span class="o">+</span><span class="p">(</span><span class="mi">1</span><span class="p">,)</span><span class="o">*</span><span class="n">z0</span><span class="o">.</span><span class="n">ndim</span><span class="p">)</span>
    <span class="n">avals</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="n">z0</span> <span class="o">+</span> <span class="n">zs</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">a</span><span class="o">*</span><span class="n">zs</span><span class="p">))</span>
    <span class="n">ints</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">boot_reps</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">avals</span><span class="p">)</span>
    <span class="n">ints</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan_to_num</span><span class="p">(</span><span class="n">ints</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">)</span>

    <span class="c1"># Compute confidence interval</span>
    <span class="n">boot_reps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">boot_reps</span><span class="p">)</span>
    <span class="n">ci_low</span> <span class="o">=</span> <span class="n">boot_reps</span><span class="p">[</span><span class="n">ints</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
    <span class="n">ci_high</span> <span class="o">=</span> <span class="n">boot_reps</span><span class="p">[</span><span class="n">ints</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">ci_low</span><span class="p">,</span> <span class="n">ci_high</span><span class="p">)</span>


<span class="n">the_bcas</span> <span class="o">=</span> <span class="p">{}</span>

<span class="n">an_int</span> <span class="o">=</span> <span class="mi">50</span>

<span class="c1"># rural cis</span>
<span class="n">r_median</span> <span class="o">=</span> <span class="n">grt_dtr</span><span class="p">[</span><span class="n">grt_dtr</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;rural&#39;</span><span class="p">][</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
<span class="n">a_result</span> <span class="o">=</span> <span class="n">compute_bca_ci</span><span class="p">(</span><span class="n">grt_dtr</span><span class="p">[</span><span class="n">grt_dtr</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;rural&#39;</span><span class="p">][</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span> <span class="mf">.05</span><span class="p">,</span> <span class="n">n_reps</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">statfunction</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">,</span> <span class="n">stat_param</span><span class="o">=</span><span class="n">an_int</span><span class="p">)</span>
<span class="n">r_cis</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;rural&#39;</span><span class="p">:{</span><span class="s2">&quot;lower 2.5%&quot;</span><span class="p">:</span><span class="n">a_result</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;median&quot;</span><span class="p">:</span><span class="n">r_median</span><span class="p">,</span> <span class="s2">&quot;upper 97.5%&quot;</span><span class="p">:</span> <span class="n">a_result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">}}</span>
<span class="n">the_bcas</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">r_cis</span><span class="p">)</span>

<span class="c1"># urban cis</span>
<span class="n">u_median</span> <span class="o">=</span> <span class="n">grt_dtr</span><span class="p">[</span><span class="n">grt_dtr</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;urban&#39;</span><span class="p">][</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
<span class="n">a_result</span> <span class="o">=</span> <span class="n">compute_bca_ci</span><span class="p">(</span><span class="n">grt_dtr</span><span class="p">[</span><span class="n">grt_dtr</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;urban&#39;</span><span class="p">][</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span> <span class="mf">.05</span><span class="p">,</span> <span class="n">n_reps</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">statfunction</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">,</span> <span class="n">stat_param</span><span class="o">=</span><span class="n">an_int</span><span class="p">)</span>
<span class="n">u_cis</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;urban&#39;</span><span class="p">:{</span><span class="s2">&quot;lower 2.5%&quot;</span><span class="p">:</span><span class="n">a_result</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;median&quot;</span><span class="p">:</span><span class="n">u_median</span><span class="p">,</span> <span class="s2">&quot;upper 97.5%&quot;</span><span class="p">:</span> <span class="n">a_result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">}}</span>
<span class="n">the_bcas</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">u_cis</span><span class="p">)</span>

<span class="c1"># all surveys</span>
<span class="n">u_median</span> <span class="o">=</span> <span class="n">grt_dtr</span><span class="p">[</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
<span class="n">a_result</span> <span class="o">=</span> <span class="n">compute_bca_ci</span><span class="p">(</span><span class="n">grt_dtr</span><span class="p">[</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span> <span class="mf">.05</span><span class="p">,</span> <span class="n">n_reps</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">statfunction</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">,</span> <span class="n">stat_param</span><span class="o">=</span><span class="n">an_int</span><span class="p">)</span>
<span class="n">all_cis</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;all surveys&#39;</span><span class="p">:{</span><span class="s2">&quot;lower 2.5%&quot;</span><span class="p">:</span><span class="n">a_result</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;median&quot;</span><span class="p">:</span><span class="n">u_median</span><span class="p">,</span> <span class="s2">&quot;upper 97.5%&quot;</span><span class="p">:</span> <span class="n">a_result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">}}</span>

<span class="c1"># combine the results:</span>
<span class="n">the_bcas</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">all_cis</span><span class="p">)</span>

<span class="c1"># make a df</span>
<span class="n">the_cis</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">the_bcas</span><span class="p">)</span>
<span class="n">the_cis</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">the_cis</span><span class="o">.</span><span class="n">values</span>
<span class="n">collabels</span> <span class="o">=</span> <span class="n">the_cis</span><span class="o">.</span><span class="n">columns</span>
<span class="n">sut</span><span class="o">.</span><span class="n">hide_spines_ticks_grids</span><span class="p">(</span><span class="n">axs</span><span class="p">)</span>

<span class="n">the_first_table_data</span> <span class="o">=</span> <span class="n">axs</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">colLabels</span><span class="o">=</span><span class="n">collabels</span><span class="p">,</span> <span class="n">colWidths</span><span class="o">=</span><span class="p">[</span><span class="o">*</span><span class="p">[</span><span class="mf">.2</span><span class="p">]</span><span class="o">*</span><span class="mi">5</span><span class="p">],</span> <span class="n">bbox</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

<span class="n">a_summary_table_one</span> <span class="o">=</span> <span class="n">sut</span><span class="o">.</span><span class="n">make_a_summary_table</span><span class="p">(</span><span class="n">the_first_table_data</span><span class="p">,</span><span class="n">data</span><span class="p">,</span><span class="n">collabels</span><span class="p">,</span> <span class="n">a_color</span><span class="p">,</span> <span class="n">s_et_bottom_row</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">a_summary_table_one</span><span class="o">.</span><span class="n">get_celld</span><span class="p">()[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)]</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/shared_responsibility_37_0.png" src="_images/shared_responsibility_37_0.png" />
</div>
</div>
<p><em><strong>Below:</strong> the survey results of the most common objects under the two different land use classes.</em></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rur_10</span> <span class="o">=</span> <span class="n">fd</span><span class="p">[(</span><span class="n">fd</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;rural&#39;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">fd</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">most_common</span><span class="p">))]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">,</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">quantity</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;quantity&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">urb_10</span> <span class="o">=</span> <span class="n">fd</span><span class="p">[(</span><span class="n">fd</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;urban&#39;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">fd</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">most_common</span><span class="p">))]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">,</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">quantity</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;quantity&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">rur_tot</span> <span class="o">=</span> <span class="n">fd</span><span class="p">[</span><span class="n">fd</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">rural</span><span class="p">)]</span><span class="o">.</span><span class="n">quantity</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">urb_tot</span> <span class="o">=</span> <span class="n">fd</span><span class="p">[</span><span class="n">fd</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">urban</span><span class="p">)]</span><span class="o">.</span><span class="n">quantity</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="n">rur_10</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rur_10</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">code_description_map</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
<span class="n">urb_10</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">urb_10</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">code_description_map</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>

<span class="n">rur_10</span><span class="p">[</span><span class="s2">&quot;</span><span class="si">% o</span><span class="s2">f total&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="n">rur_10</span><span class="o">.</span><span class="n">quantity</span><span class="o">/</span><span class="n">rur_tot</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">urb_10</span><span class="p">[</span><span class="s2">&quot;</span><span class="si">% o</span><span class="s2">f total&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="n">urb_10</span><span class="o">.</span><span class="n">quantity</span><span class="o">/</span><span class="n">urb_tot</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># make tables</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">most_common</span><span class="p">)</span><span class="o">*</span><span class="mf">.8</span><span class="p">))</span>

<span class="c1"># summary table</span>
<span class="c1"># names for the table columns</span>
<span class="n">a_col</span> <span class="o">=</span> <span class="p">[</span><span class="n">top_name</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;total&#39;</span><span class="p">]</span>

<span class="n">axone</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">axtwo</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="n">sut</span><span class="o">.</span><span class="n">hide_spines_ticks_grids</span><span class="p">(</span><span class="n">axone</span><span class="p">)</span>
<span class="n">sut</span><span class="o">.</span><span class="n">hide_spines_ticks_grids</span><span class="p">(</span><span class="n">axtwo</span><span class="p">)</span>

<span class="n">data_one</span> <span class="o">=</span> <span class="n">rur_10</span><span class="p">[[</span><span class="s1">&#39;item&#39;</span><span class="p">,</span> <span class="s1">&#39;quantity&#39;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">% o</span><span class="s2">f total&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">data_two</span> <span class="o">=</span> <span class="n">urb_10</span><span class="p">[[</span><span class="s1">&#39;item&#39;</span><span class="p">,</span> <span class="s1">&#39;quantity&#39;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">% o</span><span class="s2">f total&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="k">for</span> <span class="n">a_df</span> <span class="ow">in</span> <span class="p">[</span><span class="n">data_one</span><span class="p">,</span> <span class="n">data_two</span><span class="p">]:</span>
    <span class="n">a_df</span><span class="p">[</span><span class="s1">&#39;quantity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">a_df</span><span class="o">.</span><span class="n">quantity</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">F</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">a_table</span> <span class="o">=</span> <span class="n">axone</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">cellText</span><span class="o">=</span><span class="n">data_one</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>  <span class="n">colLabels</span><span class="o">=</span><span class="n">data_one</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">colWidths</span><span class="o">=</span><span class="p">[</span><span class="mf">.6</span><span class="p">,</span><span class="o">*</span><span class="p">[</span><span class="mf">.2</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">],</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;lower center&#39;</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">the_material_table_data</span> <span class="o">=</span> <span class="n">sut</span><span class="o">.</span><span class="n">make_a_summary_table</span><span class="p">(</span><span class="n">a_table</span><span class="p">,</span><span class="n">data_one</span><span class="o">.</span><span class="n">values</span><span class="p">,</span><span class="n">data_one</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">s_et_bottom_row</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">a_table</span> <span class="o">=</span> <span class="n">axtwo</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">cellText</span><span class="o">=</span><span class="n">data_two</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>  <span class="n">colLabels</span><span class="o">=</span><span class="n">data_one</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">colWidths</span><span class="o">=</span><span class="p">[</span><span class="mf">.6</span><span class="p">,</span><span class="o">*</span><span class="p">[</span><span class="mf">.2</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="p">],</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;lower center&#39;</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">the_material_table_data</span> <span class="o">=</span> <span class="n">sut</span><span class="o">.</span><span class="n">make_a_summary_table</span><span class="p">(</span><span class="n">a_table</span><span class="p">,</span><span class="n">data_one</span><span class="o">.</span><span class="n">values</span><span class="p">,</span><span class="n">data_one</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">s_et_bottom_row</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">axone</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;rural&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">xlab_k14</span><span class="p">)</span>
<span class="n">axtwo</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;urban&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">xlab_k14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/shared_responsibility_39_0.png" src="_images/shared_responsibility_39_0.png" />
</div>
</div>
</div>
<div class="section" id="seasonal-variations">
<h3><span class="section-number">20.5.2. </span>Seasonal variations<a class="headerlink" href="#seasonal-variations" title="Permalink to this headline">¶</a></h3>
<p>Seasonal variations of beach litter survey results has been documented under many conditions and many environments. In 2018 the SLR <span id="id18">[<a class="reference internal" href="references.html#id61">Bla18</a>]</span> reported the maximum value in July and the minimum in November. The year 2020-2021 presents the same results.</p>
<p><em>monthly survey results and river discharge rates m³/second</em></p>
<p><em>April and May 2021 are rolling averages, data not available</em></p>
<p><em>source : <a class="reference external" href="https://www.hydrodaten.admin.ch/en/stations-and-data.html?entrance_medium=menu">https://www.hydrodaten.admin.ch/en/stations-and-data.html?entrance_medium=menu</a></em></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># the survey results to test</span>
<span class="n">corr_data</span> <span class="o">=</span> <span class="n">fd</span><span class="p">[(</span><span class="n">fd</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">most_common</span><span class="p">))]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">results_sprmns</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">code</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">most_common</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">corr_data</span><span class="p">[</span><span class="n">corr_data</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="n">code</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">luse_exp</span><span class="p">):</span>
        <span class="n">corr</span><span class="p">,</span> <span class="n">a_p</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">spearmanr</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">n</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="n">unit_label</span><span class="p">])</span>
        <span class="n">results_sprmns</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">code</span><span class="p">:{</span><span class="s2">&quot;rho&quot;</span><span class="p">:</span><span class="n">corr</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">:</span><span class="n">a_p</span><span class="p">}})</span>

<span class="c1"># helper dict for converting ints to months</span>
<span class="n">months</span><span class="o">=</span><span class="p">{</span>
    <span class="mi">0</span><span class="p">:</span><span class="s1">&#39;Jan&#39;</span><span class="p">,</span>
    <span class="mi">1</span><span class="p">:</span><span class="s1">&#39;Feb&#39;</span><span class="p">,</span>
    <span class="mi">2</span><span class="p">:</span><span class="s1">&#39;Mar&#39;</span><span class="p">,</span>
    <span class="mi">3</span><span class="p">:</span><span class="s1">&#39;Apr&#39;</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">:</span><span class="s1">&#39;May&#39;</span><span class="p">,</span>
    <span class="mi">5</span><span class="p">:</span><span class="s1">&#39;Jun&#39;</span><span class="p">,</span>
    <span class="mi">6</span><span class="p">:</span><span class="s1">&#39;Jul&#39;</span><span class="p">,</span>
    <span class="mi">7</span><span class="p">:</span><span class="s1">&#39;Aug&#39;</span><span class="p">,</span>
    <span class="mi">8</span><span class="p">:</span><span class="s1">&#39;Sep&#39;</span><span class="p">,</span>
    <span class="mi">9</span><span class="p">:</span><span class="s1">&#39;Oct&#39;</span><span class="p">,</span>
    <span class="mi">10</span><span class="p">:</span><span class="s1">&#39;Nov&#39;</span><span class="p">,</span>
    <span class="mi">11</span><span class="p">:</span><span class="s1">&#39;Dec&#39;</span>
<span class="p">}</span>

<span class="n">m_dt</span> <span class="o">=</span> <span class="n">fd</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;loc_date&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span><span class="s1">&#39;group&#39;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;quantity&#39;</span><span class="p">:</span><span class="s1">&#39;sum&#39;</span><span class="p">,</span> <span class="n">unit_label</span><span class="p">:</span><span class="s1">&#39;sum&#39;</span><span class="p">})</span>

<span class="c1"># sample totals all objects</span>
<span class="n">m_dt_t</span> <span class="o">=</span> <span class="n">fd</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;loc_date&#39;</span><span class="p">,</span><span class="s1">&#39;date&#39;</span><span class="p">,</span><span class="s1">&#39;month&#39;</span><span class="p">,</span> <span class="s1">&#39;eom&#39;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="n">unit_label</span><span class="p">:</span><span class="s1">&#39;sum&#39;</span><span class="p">})</span>
<span class="n">m_dt_t</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># data montlhy median survey results contributed, distributed and survey total</span>
<span class="n">fxi</span><span class="o">=</span><span class="n">m_dt</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">data1</span> <span class="o">=</span> <span class="n">fxi</span><span class="p">[</span><span class="n">fxi</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">CG</span><span class="p">][</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">&quot;M&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">data2</span> <span class="o">=</span> <span class="n">fxi</span><span class="p">[</span><span class="n">fxi</span><span class="o">.</span><span class="n">group</span> <span class="o">==</span> <span class="n">DG</span><span class="p">][</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">&quot;M&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># helper tool for months in integer order</span>
<span class="k">def</span> <span class="nf">new_month</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">11</span><span class="p">:</span>
        <span class="n">this_month</span> <span class="o">=</span> <span class="n">x</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">this_month</span><span class="o">=</span><span class="n">x</span><span class="o">-</span><span class="mi">12</span>    
    <span class="k">return</span> <span class="n">this_month</span>

<span class="c1"># the monthly average discharge rate of the three rivers where the majority of the samples are</span>
<span class="n">aare_schonau</span> <span class="o">=</span> <span class="p">[</span><span class="mf">61.9</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mf">61.5</span><span class="p">,</span> <span class="mi">105</span><span class="p">,</span> <span class="mi">161</span><span class="p">,</span> <span class="mi">155</span><span class="p">,</span> <span class="mi">295</span><span class="p">,</span> <span class="mi">244</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">106</span><span class="p">,</span> <span class="mi">93</span><span class="p">,</span> <span class="mf">55.2</span><span class="p">,</span> <span class="mf">74.6</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mf">73.6</span><span class="p">,</span> <span class="mf">92.1</span><span class="p">]</span>
<span class="n">rhone_scex</span> <span class="o">=</span>   <span class="p">[</span><span class="mi">152</span><span class="p">,</span> <span class="mi">144</span><span class="p">,</span> <span class="mi">146</span><span class="p">,</span> <span class="mi">155</span><span class="p">,</span> <span class="mi">253</span><span class="p">,</span> <span class="mi">277</span><span class="p">,</span> <span class="mi">317</span><span class="p">,</span> <span class="mi">291</span><span class="p">,</span> <span class="mi">193</span><span class="p">,</span> <span class="mi">158</span><span class="p">,</span> <span class="mi">137</span><span class="p">,</span> <span class="mi">129</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">146</span><span class="p">,</span> <span class="mi">121</span><span class="p">,</span> <span class="mi">107</span><span class="p">]</span>
<span class="n">linth_weesen</span> <span class="o">=</span> <span class="p">[</span><span class="mf">25.3</span><span class="p">,</span> <span class="mf">50.7</span><span class="p">,</span> <span class="mf">40.3</span><span class="p">,</span> <span class="mf">44.3</span><span class="p">,</span> <span class="mf">64.5</span><span class="p">,</span> <span class="mf">63.2</span><span class="p">,</span> <span class="mf">66.2</span><span class="p">,</span> <span class="mf">61.5</span><span class="p">,</span> <span class="mf">55.9</span><span class="p">,</span> <span class="mf">52.5</span><span class="p">,</span> <span class="mf">35.2</span><span class="p">,</span> <span class="mf">30.5</span><span class="p">,</span> <span class="mf">26.1</span><span class="p">,</span> <span class="mf">42.0</span><span class="p">,</span> <span class="mf">36.9</span><span class="p">]</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    
<span class="n">this_x</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span>  <span class="nb">enumerate</span><span class="p">(</span><span class="n">data1</span><span class="o">.</span><span class="n">index</span><span class="p">)]</span>
<span class="n">this_month</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">month</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data1</span><span class="o">.</span><span class="n">index</span><span class="p">)]</span>

<span class="n">twin_ax</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">twin_ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">this_x</span><span class="p">,</span> <span class="n">data1</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;contributed&#39;</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="n">data2</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;salmon&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span>  <span class="nb">enumerate</span><span class="p">(</span><span class="n">data2</span><span class="o">.</span><span class="n">index</span><span class="p">)],</span> <span class="n">data2</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;distributed&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;darkslategray&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>

<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">this_x</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="o">*</span><span class="n">aare_schonau</span><span class="p">[</span><span class="mi">2</span><span class="p">:],</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">aare_schonau</span><span class="p">)],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;turquoise&#39;</span><span class="p">,</span>  <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;magenta&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Aare m³/s&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">twin_ax</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">this_x</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="o">*</span><span class="n">rhone_scex</span><span class="p">[</span><span class="mi">2</span><span class="p">:],</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">rhone_scex</span><span class="p">)],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;royalblue&#39;</span><span class="p">,</span>  <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;magenta&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Rhône m³/s&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">twin_ax</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">this_x</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="o">*</span><span class="n">linth_weesen</span><span class="p">[</span><span class="mi">2</span><span class="p">:],</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">linth_weesen</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">linth_weesen</span><span class="p">)],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;magenta&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Linth m³/s&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">twin_ax</span><span class="p">)</span>
<span class="n">handles</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()</span>
<span class="n">handles2</span><span class="p">,</span> <span class="n">labels2</span> <span class="o">=</span> <span class="n">twin_ax</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">ticker</span><span class="o">.</span><span class="n">FixedLocator</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">this_x</span><span class="p">))]))</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">unit_label</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">xlab_k14</span><span class="p">)</span>
<span class="n">twin_ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;m³/sec&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">xlab_k14</span><span class="p">)</span>

<span class="n">axisticks</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_xticks</span><span class="p">()</span>
<span class="n">labelsx</span> <span class="o">=</span> <span class="p">[</span><span class="n">months</span><span class="p">[</span><span class="n">new_month</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span>  <span class="n">this_month</span><span class="p">]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">ticks</span><span class="o">=</span><span class="n">axisticks</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">labelsx</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="o">*</span><span class="n">handles</span><span class="p">,</span> <span class="o">*</span><span class="n">handles2</span><span class="p">],</span> <span class="p">[</span><span class="o">*</span><span class="n">labels</span><span class="p">,</span> <span class="o">*</span><span class="n">labels2</span><span class="p">],</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">.1</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/shared_responsibility_42_0.png" src="_images/shared_responsibility_42_0.png" />
</div>
</div>
</div>
</div>
<div class="section" id="the-survey-results-of-fp-and-ft-with-respect-to-land-use">
<h2><span class="section-number">20.6. </span>The survey results of FP and FT with respect to land use<a class="headerlink" href="#the-survey-results-of-fp-and-ft-with-respect-to-land-use" title="Permalink to this headline">¶</a></h2>
<p><strong>Results of KS test and Mann Whitney U</strong></p>
<p>The survey results for FP objects is very similar up to <span class="math notranslate nohighlight">\(\approx\)</span> the 85<sup>th</sup> percentile where the rural survey results are noticeably larger. Suggesting that extreme values for FP were more likely in rural locations. According to the KS test (ks=0.78, pvalue=0.69) and MWU test (U=10624, pvalue=0.40) the distribution of FP objects under the two land use classes is not significantly different and may be equal.</p>
<p>The survey results for FT objects maintain the same features as the parent distribution. The results of the KS test (ks=0.29, pvalue&lt;.001) and MWU test (U=7356.5, p&lt;.001) agree with the results of the parent group, that there is a statistically relevant difference between the survey results under different land use classes.</p>
<p><em>Left rural - urban: ECDF of survey results fragmented plastics and foams (FP)</em></p>
<p><em>Right rural - urban: ECDF of survey results cigarette ends and candy wrappers (FT)</em></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">agg_dobj</span> <span class="o">=</span> <span class="n">fd</span><span class="p">[(</span><span class="n">fd</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;rural&#39;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">fd</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;Gfrags&#39;</span><span class="p">,</span> <span class="s1">&#39;Gfoam&#39;</span><span class="p">]))]</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;loc_date&#39;</span><span class="p">])[</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">values</span>
<span class="n">buld_obj</span> <span class="o">=</span> <span class="n">fd</span><span class="p">[(</span><span class="n">fd</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;urban&#39;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">fd</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;Gfrags&#39;</span><span class="p">,</span> <span class="s1">&#39;Gfoam&#39;</span><span class="p">]))]</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;loc_date&#39;</span><span class="p">])[</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">values</span>

<span class="n">a_d_ecdf</span> <span class="o">=</span> <span class="n">ECDF</span><span class="p">(</span><span class="n">agg_dobj</span><span class="p">)</span>
<span class="n">b_d_ecdf</span> <span class="o">=</span> <span class="n">ECDF</span><span class="p">(</span><span class="n">buld_obj</span><span class="p">)</span>

<span class="n">agg_cont</span> <span class="o">=</span> <span class="n">fd</span><span class="p">[(</span><span class="n">fd</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;rural&#39;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">fd</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;G27&#39;</span><span class="p">,</span> <span class="s1">&#39;G30&#39;</span><span class="p">]))]</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;loc_date&#39;</span><span class="p">])[</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">values</span>
<span class="n">b_cont</span> <span class="o">=</span> <span class="n">fd</span><span class="p">[(</span><span class="n">fd</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;urban&#39;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">fd</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;G27&#39;</span><span class="p">,</span> <span class="s1">&#39;G30&#39;</span><span class="p">]))]</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;loc_date&#39;</span><span class="p">])[</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">values</span>

<span class="n">a_c_ecdf</span> <span class="o">=</span> <span class="n">ECDF</span><span class="p">(</span><span class="n">agg_cont</span><span class="p">)</span>
<span class="n">b_c_ecdf</span> <span class="o">=</span> <span class="n">ECDF</span><span class="p">(</span><span class="n">b_cont</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>

<span class="n">axone</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">a_d_ecdf</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">a_d_ecdf</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;salmon&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;rural&quot;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axone</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">b_d_ecdf</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">b_d_ecdf</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;urban&quot;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axone</span><span class="p">)</span>
<span class="n">axone</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">unit_label</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">xlab_k14</span><span class="p">)</span>
<span class="n">axone</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">% o</span><span class="s1">f surveys&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">xlab_k14</span><span class="p">)</span>

<span class="n">axone</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;FP&#39;</span><span class="p">,</span><span class="n">title_fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>

<span class="n">axtwo</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">a_c_ecdf</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">a_c_ecdf</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;salmon&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;rural&quot;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axtwo</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">b_c_ecdf</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">b_c_ecdf</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;urban&quot;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axtwo</span><span class="p">)</span>

<span class="n">axtwo</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">unit_label</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">xlab_k14</span><span class="p">)</span>
<span class="n">axtwo</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>

<span class="n">axtwo</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;FT&#39;</span><span class="p">,</span><span class="n">title_fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/shared_responsibility_45_0.png" src="_images/shared_responsibility_45_0.png" />
</div>
</div>
<div class="section" id="fp-and-ft-difference-of-means">
<h3><span class="section-number">20.6.1. </span>FP and FT difference of means.<a class="headerlink" href="#fp-and-ft-difference-of-means" title="Permalink to this headline">¶</a></h3>
<p>The average survey result of FP objects in rural locations was 22.93p/50m in urban locations it was 12p/50m. A permutation test on the difference of means was conducted on the condition <em>rural</em> - <em>urban</em>.</p>
<p><em>Difference of means fragmented foams and plastics under the two different land use classes.</em></p>
<p><em><span class="math notranslate nohighlight">\(\mu_{rural}\)</span> - <span class="math notranslate nohighlight">\(\mu_{urban}\)</span>, method=shuffle, permutations=5000</em></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># pemutation test: of difference of means FP objects</span>
<span class="n">agg_dobj</span> <span class="o">=</span> <span class="n">fd</span><span class="p">[(</span><span class="n">fd</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;rural&#39;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">fd</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;Gfrags&#39;</span><span class="p">,</span> <span class="s1">&#39;G89&#39;</span><span class="p">]))]</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;loc_date&#39;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">buld_obj</span> <span class="o">=</span> <span class="n">fd</span><span class="p">[(</span><span class="n">fd</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;urban&#39;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">fd</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;Gfrags&#39;</span><span class="p">,</span> <span class="s1">&#39;G89&#39;</span><span class="p">]))]</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;loc_date&#39;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="c1"># label the urban and rural results</span>
<span class="n">agg_dobj</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;rural&#39;</span>
<span class="n">buld_obj</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;urban&#39;</span>

<span class="c1"># merge into one </span>
<span class="n">objs_merged</span> <span class="o">=</span> <span class="n">agg_dobj</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">buld_obj</span><span class="p">)</span>

<span class="c1"># store the mean per class</span>
<span class="n">the_mean</span> <span class="o">=</span> <span class="n">objs_merged</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">)[</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># store the difference</span>
<span class="n">mean_diff</span> <span class="o">=</span> <span class="n">the_mean</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;rural&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">the_mean</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;urban&#39;</span><span class="p">]</span>
<span class="n">new_means</span><span class="o">=</span><span class="p">[]</span>

<span class="c1"># permutation resampling:</span>
<span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5000</span><span class="p">):</span>
    <span class="n">objs_merged</span><span class="p">[</span><span class="s1">&#39;new_class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">objs_merged</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">frac</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
    <span class="n">b</span><span class="o">=</span><span class="n">objs_merged</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;new_class&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">new_means</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">b</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;rural&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">b</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;urban&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">emp_p</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span><span class="n">new_means</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">the_mean</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;rural&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">the_mean</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;urban&#39;</span><span class="p">]))</span> <span class="o">/</span> <span class="mi">5000</span>

<span class="c1"># chart the results</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">new_means</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">F</span><span class="s2">&quot;$</span><span class="se">\u0394</span><span class="s2">\mu$ = </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">mean_diff</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2">, perm=5000, p=</span><span class="si">{</span><span class="n">emp_p</span><span class="si">}</span><span class="s2"> &quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">title_k14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;permutations&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">xlab_k14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;$\mu$ rural - $\mu$ urban&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">xlab_k14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/shared_responsibility_48_0.png" src="_images/shared_responsibility_48_0.png" />
</div>
</div>
<p><em>Refuse to reject the null hypotheses: there is no statistically significant difference between the two distributions</em></p>
<p><em>Difference of means cigarette ends and snack wrappers under the two different land use classes.</em></p>
<p><em><span class="math notranslate nohighlight">\(\mu_{rural}\)</span> - <span class="math notranslate nohighlight">\(\mu_{urban}\)</span>, method=shuffle, permutations=5000</em></p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># pemutation test: of difference of means food objects</span>
<span class="n">agg_cont</span> <span class="o">=</span> <span class="n">fd</span><span class="p">[(</span><span class="n">fd</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;rural&#39;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">fd</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;G27&#39;</span><span class="p">,</span> <span class="s1">&#39;G30&#39;</span><span class="p">]))]</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;loc_date&#39;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">b_cont</span> <span class="o">=</span> <span class="n">fd</span><span class="p">[(</span><span class="n">fd</span><span class="o">.</span><span class="n">rural</span> <span class="o">==</span> <span class="s1">&#39;urban&#39;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">fd</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;G27&#39;</span><span class="p">,</span> <span class="s1">&#39;G30&#39;</span><span class="p">]))]</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;loc_date&#39;</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="c1"># label the urban and rural results</span>
<span class="n">agg_cont</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;rural&#39;</span>
<span class="n">b_cont</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;urban&#39;</span>

<span class="c1"># merge into one </span>
<span class="n">objs_merged</span> <span class="o">=</span> <span class="n">agg_cont</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">b_cont</span><span class="p">)</span>

<span class="c1"># store the mean per class</span>
<span class="n">the_mean</span> <span class="o">=</span> <span class="n">objs_merged</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">)[</span><span class="n">unit_label</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="c1"># store the difference</span>
<span class="n">mean_diff</span> <span class="o">=</span> <span class="n">the_mean</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;rural&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">the_mean</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;urban&#39;</span><span class="p">]</span>

<span class="c1"># permutation resampling:</span>
<span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5000</span><span class="p">):</span>
    <span class="n">objs_merged</span><span class="p">[</span><span class="s1">&#39;new_class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">objs_merged</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">frac</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">values</span>
    <span class="n">b</span><span class="o">=</span><span class="n">objs_merged</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;new_class&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">new_means</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">b</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;rural&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">b</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;urban&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">emp_p</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span><span class="n">new_means</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">the_mean</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;rural&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">the_mean</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;urban&#39;</span><span class="p">]))</span> <span class="o">/</span> <span class="mi">5000</span>

<span class="c1"># chart the results</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">new_means</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">F</span><span class="s2">&quot;$</span><span class="se">\u0394</span><span class="s2">\mu$ = </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">mean_diff</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2">, perm=5000, p=</span><span class="si">{</span><span class="n">emp_p</span><span class="si">}</span><span class="s2"> &quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">title_k14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;permutations&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">xlab_k14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;$\mu$ rural - $\mu$ urban&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">ck</span><span class="o">.</span><span class="n">xlab_k14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/shared_responsibility_51_0.png" src="_images/shared_responsibility_51_0.png" />
</div>
</div>
<p><em>Reject the null hypothesis: the two distributions are most likely not the same</em></p>
<div class="cell tag_remove-input docutils container">
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="reuse_remake.html" title="previous page"><span class="section-number">19. </span>Recycle and remake</a>
    <a class='right-next' id="next-link" href="slr_2017.html" title="next page"><span class="section-number">21. </span>More and less since 2018</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          <div class="extra_footer">
            <p>
   Comissioned by the Swiss Federal Office for the Environment (FOEN), © 2021
</p>

          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>